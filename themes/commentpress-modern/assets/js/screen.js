CommentPress.theme={};CommentPress.theme.settings=new function(){var a=this,b=jQuery.noConflict();this.init=function(){};this.dom_ready=function(){}};CommentPress.theme.DOM=new function(){var a=this,b=jQuery.noConflict();this.init=function(){a.head();b("html").addClass("js")};this.dom_ready=function(){};this.head=function(){var e,d,f,g,c;e="";d=70;if(document.getElementById){e+='<style type="text/css" media="screen">';if(cp_is_mobile=="0"){if(cp_textblock_meta=="0"){e+="#content .textblock span.para_marker, #content .textblock span.commenticonbox { display: none; } ";e+=".content .textblock span.para_marker, .content .textblock span.commenticonbox { display: none; } "}}e+="ul.all_comments_listing div.item_body { display: none; } ";if(CommentPress.settings.DOM.get_wp_adminbar()=="y"){e+="body.admin-bar #header, #header { top: "+CommentPress.settings.DOM.get_wp_adminbar_height()+"px; } ";e+="body.admin-bar #sidebar, #sidebar, body.admin-bar #navigation, #navigation { top: "+(CommentPress.settings.DOM.get_wp_adminbar_height()+d)+"px; } ";if(CommentPress.settings.DOM.get_wp_adminbar_height()=="32"){e+="@media screen and ( max-width: 782px ) { body.admin-bar #header, #header { top: "+CommentPress.settings.DOM.get_wp_adminbar_expanded()+"px; }body.admin-bar #sidebar, #sidebar, body.admin-bar #navigation, #navigation { top: "+(CommentPress.settings.DOM.get_wp_adminbar_expanded()+d)+"px; } } "}}if(cp_show_subpages=="0"){e+="#toc_sidebar .sidebar_contents_wrapper ul li ul { display: none; } ";e+="#toc_sidebar .sidebar_contents_wrapper ul li.current_page_ancestor > ul { display: block; } "}if(cp_special_page=="0"){e+="#respond { display: none; } "}e+="#sidebar .paragraph_wrapper { display: none; } ";e+="#navigation .paragraph_wrapper { display: none; } ";e+="#sidebar .paragraph_wrapper.start_open { display: block; } ";e+="#navigation .paragraph_wrapper.start_open { display: block; } ";e+=".commentpress_page #navigation .paragraph_wrapper.special_pages_wrapper { display: block; } ";e+="#original .post, #literal .post { display: none; } ";e+="</style>"}document.write(e)}};CommentPress.theme.header=new function(){var a=this,b=jQuery.noConflict();this.init=function(){};this.dom_ready=function(){};this.get_offset=function(){var c;c=0-b("#header").height()-b("#sidebar_tabs").height();if(CommentPress.settings.DOM.get_wp_adminbar()=="y"){c-=CommentPress.settings.DOM.get_wp_adminbar_height()}return c}};CommentPress.theme.navigation=new function(){var a=this,b=jQuery.noConflict();this.init=function(){};this.dom_ready=function(){a.menu()};this.menu=function(){b("#toc_sidebar").on("click","ul#nav li a",function(d){var c;c=b(this).parent().find("ul");if(c.length>0){b(this).next("ul").slideToggle();d.preventDefault()}})}};CommentPress.theme.content=new function(){var a=this,b=jQuery.noConflict();this.init=function(){};this.dom_ready=function(){a.tabs()};this.tabs=function(){var d,c;d=b("#page_wrapper").css("min-height");c=b("#page_wrapper").css("padding-bottom");b("#literal .post").css("display","none");b("#original .post").css("display","none");CommentPress.common.content.workflow_tabs(d,c)}};CommentPress.theme.sidebars=new function(){var a=this,b=jQuery.noConflict();this.init=function(){};this.dom_ready=function(){a.enable_buttons();a.set_height()};this.set_height=function(){var h,j,g,c,d,f,e,k,i;h=b(window).height();j=b("#header").height();g=b("#switcher").height();c=b("#toc_sidebar > .sidebar_header").height();if(CommentPress.settings.DOM.get_wp_adminbar()=="y"){d=b("#wpadminbar").height()}else{d=0}f=h-(j+c+d);e=b("#switcher").css("display");if(e==="block"){f=f-g}b("#toc_sidebar .sidebar_contents_wrapper").css("height",f+"px");k=b("#sidebar_tabs").height();i=h-(j+k+d);if(e==="block"){i=i-g}b("#sidebar .sidebar_contents_wrapper").css("height",i+"px")};this.activate_sidebar=function(f){if(f=="comments"){if(!b("body").hasClass("active-sidebar")||b("body").hasClass("active-nav")){CommentPress.theme.sidebars.show_discuss()}}var d,e,c;d=b("#"+f+"_sidebar").css("z-index");if(d=="2001"){b(".sidebar_container").css("z-index","2001");b("#sidebar_tabs h2 a").removeClass("active-tab");b("#"+f+"_sidebar").css("z-index","2010");b("#sidebar_tabs #"+f+"_header h2 a").addClass("active-tab")}};this.enable_buttons=function(){b(".navigation-button").click(function(c){c.preventDefault();a.show_nav()});b(".content-button").click(function(c){c.preventDefault();a.show_content()});b(".sidebar-button").click(function(c){c.preventDefault();a.show_discuss()})};this.show_nav=function(){b("body").toggleClass("active-nav").removeClass("active-sidebar");b(".sidebar-button,.content-button").removeClass("active-button");b(".navigation-button").toggleClass("active-button")};this.show_content=function(){b("body").removeClass("active-sidebar").removeClass("active-nav");b(".navigation-button,.sidebar-button").removeClass("active-button");b(".content-button").toggleClass("active-button")};this.show_discuss=function(){b("body").toggleClass("active-sidebar").removeClass("active-nav");b(".navigation-button,.content-button").removeClass("active-button");b(".sidebar-button").toggleClass("active-button")}};CommentPress.theme.viewport=new function(){var a=this,b=jQuery.noConflict();this.init=function(){};this.dom_ready=function(){a.track_resize();a.track_scrolling()};this.track_resize=function(){b(window).resize(function(){CommentPress.theme.sidebars.set_height()})};this.track_scrolling=function(){b(window).scroll(function(){var k,m,j,d,e,i,g,n,l,h,f,o,c;h=b("#header");position=h.css("position");if(position=="absolute"){m=h.height();f=h.position();o=window.pageYOffset-(f.top+m);if(parseInt(o)>0){c=b.px_to_num(b("html body #content_container #sidebar").css("top"));if(c=="0"){return}b("html body #content_container #sidebar,html body #content_container #navigation").css("top","0");k=b(window).height();j=b("#switcher").height();d=b("#toc_sidebar > .sidebar_header").height();i=k-d;g=b("#switcher").css("display");if(g==="block"){i=i-j}b("#toc_sidebar .sidebar_contents_wrapper").css("height",i+"px");n=b("#sidebar_tabs").height();l=k-n;if(g==="block"){l=l-j}b("#sidebar .sidebar_contents_wrapper").css("height",l+"px")}else{if(CommentPress.settings.DOM.get_wp_adminbar()=="y"){e=b("#wpadminbar").height()}else{e=0}c=b.px_to_num(b("html body #content_container #sidebar").css("top"));if(c==m+e){return}b("html body #content_container #sidebar,html body #content_container #navigation").css("top",(m+e)+"px");CommentPress.theme.sidebars.set_height()}}})};this.scroll_to_top=function(e,d){if("undefined"===typeof e){return}var c;if(cp_is_mobile=="0"||cp_is_tablet=="1"){if(e==0){c=b(".comments_container").prop("id");if("undefined"!==typeof c){target_id=c.split("-")[1];e=b("#post-"+target_id)}}b.scrollTo(e,{duration:(d*1.5),axis:"y",offset:CommentPress.theme.header.get_offset()})}};this.on_load_scroll_to_anchor=function(){var l,f,g,k,m,c,j,h,e,d,i;l="";f=document.location.toString();if(f.match("#comment-")){CommentPress.theme.sidebars.activate_sidebar("comments");g=f.split("#comment-")[1];k=b("#comment-"+g).parents("div.paragraph_wrapper").map(function(){return this});if(k.length>0){m=b(k[0]);if(cp_comments_open=="y"){l=m.prop("id").split("-")[1];c=b("#para_wrapper-"+l+" .reply_to_para").prop("id");j=c.split("-")[1];h=b("#comment_post_ID").prop("value");if(cp_tinymce=="1"){if(b("#comment-"+g+" > .reply").text()!==""){cp_tinymce="0";addComment.moveForm("comment-"+g,g,"respond",h,l);cp_tinymce="1"}}else{addComment.moveForm("comment-"+g,g,"respond",h,l)}}m.show();CommentPress.common.comments.scroll_comments(b("#comment-"+g),1,"flash");if(l!==""){e=b("#textblock-"+l);b.highlight_para(e);CommentPress.common.content.scroll_page(e)}else{if(!CommentPress.settings.page.get_highlight()){CommentPress.theme.viewport.scroll_to_top(0,cp_scroll_speed)}CommentPress.settings.page.toggle_highlight()}return}}else{b("span.para_marker > a").each(function(q){var r,o,n,p,s;r=b(this).prop("id");if(f.match("#"+r)||f.match("#para_heading-"+r)){if(cp_comments_open=="y"){o=b("#para_wrapper-"+r+" .reply_to_para").prop("id");n=o.split("-")[1];p=b("#comment_post_ID").prop("value");addComment.moveFormToPara(n,r,p)}b("#para_heading-"+r).next("div.paragraph_wrapper").show();CommentPress.common.comments.scroll_comments(b("#para_heading-"+r),1);s=b("#textblock-"+r);b.highlight_para(s);CommentPress.common.content.scroll_page(s);return}})}if(f.match("#respond")){b("h3#para_heading- a.comment_block_permalink").click();return}if(f.match("#")){d=f.split("#")[1];if(d=="edit=true"){return}if(d=="fee-edit-link"){return}i=b("#"+d);if(i.length){CommentPress.common.content.scroll_page(i)}return}};this.align_content=function(n,m){if(m=="none"){return}if(!b("body").hasClass("active-sidebar")||b("body").hasClass("active-nav")){CommentPress.theme.sidebars.show_discuss()}var k,d,f,j,g,i,e,h,c,l;k=b("#para_heading-"+n).next("div.paragraph_wrapper");if(k.length==0){return}d=b("#para_wrapper-"+n+" .commentlist");f=k.find("#respond");j=addComment.getLevel();CommentPress.theme.sidebars.activate_sidebar("comments");g=false;i=k.css("display");if(i=="none"){g=true}b.unhighlight_para();if(n!==""){e=b("#textblock-"+n);if(cp_promote_reading=="1"&&!g){}else{b.highlight_para(e);CommentPress.common.content.scroll_page(e)}}if(cp_promote_reading=="0"){if(cp_comments_open=="y"){h=b("#comment_post_ID").prop("value");c=b("#para_wrapper-"+n+" .reply_to_para").prop("id");l=c.split("-")[1]}if(!f[0]){if(cp_comments_open=="y"){addComment.moveFormToPara(l,n,h)}}if(f[0]&&!j){if(cp_comments_open=="y"){addComment.moveFormToPara(l,n,h);if(m=="para_heading"){CommentPress.common.comments.scroll_comments(b("#para_heading-"+n),cp_scroll_speed)}else{CommentPress.common.comments.scroll_comments(b("#respond"),cp_scroll_speed)}}else{CommentPress.common.comments.scroll_comments(b("#para_heading-"+n),cp_scroll_speed)}return}if(!f[0]&&d[0]&&!g){if(cp_comments_open=="y"){if(m=="para_heading"){CommentPress.common.comments.scroll_comments(b("#para_heading-"+n),cp_scroll_speed)}else{CommentPress.common.comments.scroll_comments(b("#respond"),cp_scroll_speed)}}else{CommentPress.common.comments.scroll_comments(b("#para_heading-"+n),cp_scroll_speed)}return}if(!g&&d[0]){if(cp_comments_open=="y"){if(m=="para_heading"){CommentPress.common.comments.scroll_comments(b("#para_heading-"+n),cp_scroll_speed)}else{CommentPress.common.comments.scroll_comments(b("#respond"),cp_scroll_speed)}}else{CommentPress.common.comments.scroll_comments(b("#para_heading-"+n),cp_scroll_speed)}return}if(f[0]&&!d[0]&&!g){if(cp_comments_open=="y"){if(m=="para_heading"){CommentPress.common.comments.scroll_comments(b("#para_heading-"+n),cp_scroll_speed)}else{CommentPress.common.comments.scroll_comments(b("#respond"),cp_scroll_speed)}}else{CommentPress.common.comments.scroll_comments(b("#para_heading-"+n),cp_scroll_speed)}return}if(!g&&!d[0]){k.css("display","none");g=true}}k.slideToggle("slow",function(){if(cp_promote_reading=="1"&&g){CommentPress.common.comments.scroll_comments(b("#para_heading-"+n),cp_scroll_speed)}else{if(g){if(cp_comments_open=="y"){if(m=="para_heading"){CommentPress.common.comments.scroll_comments(b("#para_heading-"+n),cp_scroll_speed)}else{CommentPress.common.comments.scroll_comments(b("#respond"),cp_scroll_speed)}}else{CommentPress.common.comments.scroll_comments(b("#para_heading-"+n),cp_scroll_speed)}}}})}};CommentPress.theme.modern={};CommentPress.theme.settings.init();CommentPress.theme.DOM.init();CommentPress.theme.header.init();CommentPress.theme.navigation.init();CommentPress.theme.content.init();CommentPress.theme.sidebars.init();CommentPress.theme.viewport.init();jQuery(document).ready(function(a){CommentPress.theme.settings.dom_ready();CommentPress.theme.DOM.dom_ready();CommentPress.theme.header.dom_ready();CommentPress.theme.navigation.dom_ready();CommentPress.theme.content.dom_ready();CommentPress.theme.sidebars.dom_ready();CommentPress.theme.viewport.dom_ready();CommentPress.common.comments.comment_rollovers();a(document).on("commentpress-post-changed",function(d){var e,c,b;c=document.location.href;e=a(".editor_toggle a");if(e.length==0){return}b=e.attr("href");nonce=b.split("?")[1];c+="?"+nonce;e.attr("href",c)});if(cp_special_page=="1"){CommentPress.common.content.on_load_scroll_to_comment()}else{CommentPress.theme.viewport.on_load_scroll_to_anchor()}a(document).trigger("commentpress-document-ready")});