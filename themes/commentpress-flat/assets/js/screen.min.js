CommentPress.theme={},CommentPress.theme.settings=new function(){jQuery.noConflict(),this.init=function(){},this.dom_ready=function(){}},CommentPress.theme.DOM=new function(){var t=this,e=jQuery.noConflict();this.init=function(){t.head(),e("html").addClass("js")},this.dom_ready=function(){},this.head=function(){var t,e;t="",e=70,document.getElementById&&(t+='<style type="text/css" media="screen">',"0"==cp_is_mobile&&"0"==cp_textblock_meta&&(t+="#content .textblock span.para_marker, #content .textblock span.commenticonbox { display: none; } ",t+=".content .textblock span.para_marker, .content .textblock span.commenticonbox { display: none; } "),t+="ul.all_comments_listing div.item_body { display: none; } ","y"==CommentPress.settings.DOM.get_wp_adminbar()&&"32"==CommentPress.settings.DOM.get_wp_adminbar_height()&&(t+="@media screen and ( max-width: 782px ) { body.admin-bar #sidebar, #sidebar, body.admin-bar #navigation, #navigation { top: "+CommentPress.settings.DOM.get_wp_adminbar_expanded()+"px; }  } "),"0"==cp_show_subpages&&(t+="#toc_sidebar .sidebar_contents_wrapper ul li ul { display: none; } ",t+="#toc_sidebar .sidebar_contents_wrapper ul li.current_page_ancestor > ul { display: block; } ",t+="#toc_sidebar .sidebar_contents_wrapper ul li.current-menu-ancestor > ul { display: block; } ",t+="#toc_sidebar .sidebar_contents_wrapper ul li.current_page_item > ul { display: block; } "),"0"==cp_special_page&&(t+="#respond { display: none; } "),t+="#sidebar .paragraph_wrapper { display: none; } ",t+="#navigation .paragraph_wrapper { display: none; } ",t+="#sidebar .paragraph_wrapper.start_open { display: block; } ",t+="#navigation .paragraph_wrapper.start_open { display: block; } ",t+=".commentpress_page #navigation .paragraph_wrapper.special_pages_wrapper { display: block; } ",t+=".cp_sidebar_activity #comments_sidebar { display: none; } ",t+="#original .post, #literal .post { display: none; } ",t+="</style>"),document.write(t)}},CommentPress.theme.header=new function(){jQuery.noConflict(),this.init=function(){},this.dom_ready=function(){},this.get_offset=function(){var t;return t=-72,"y"==CommentPress.settings.DOM.get_wp_adminbar()&&(t-=CommentPress.settings.DOM.get_wp_adminbar_height()),t}},CommentPress.theme.switcher=new function(){var t=this,e=jQuery.noConflict();this.init=function(){t.init_active()},this.dom_ready=function(){t.init_discuss()},t.active="content",this.init_active=function(){},this.get_active=function(){return t.active},this.set_active=function(e){t.active=e},t.discuss="comments",this.init_discuss=function(){e("body").hasClass("cp_sidebar_activity")&&t.set_discuss("activity")},this.get_discuss=function(){return t.discuss},this.set_discuss=function(e){t.discuss=e}},CommentPress.theme.navigation=new function(){var t=this,e=jQuery.noConflict();this.init=function(){},this.dom_ready=function(){t.menu()},this.menu=function(){e("#toc_sidebar").on("click","ul#nav li a",function(t){var n;(n=e(this).parent().find("ul")).length>0&&(e(this).next("ul").slideToggle(),t.preventDefault())})}},CommentPress.theme.content=new function(){var t=this,e=jQuery.noConflict();this.init=function(){},this.dom_ready=function(){t.tabs()},this.tabs=function(){var t,n;t=e("#page_wrapper").css("min-height"),n=e("#page_wrapper").css("padding-bottom")}},CommentPress.theme.sidebars=new function(){var t=this,e=jQuery.noConflict();this.init=function(){},this.dom_ready=function(){t.enable_buttons(),t.set_height()},this.set_height=function(){var t,n,i,o;t=e(window).height(),("1"==cp_is_mobile||"1"==cp_is_tablet)&&t<(window_inner=window.innerHeight)&&(t=window_inner),n="y"==CommentPress.settings.DOM.get_wp_adminbar()?e("#wpadminbar").height():0,e("html body #content_container #sidebar,html body #content_container #navigation").css("top",n+"px"),i=t-n,e("#toc_sidebar .sidebar_contents_wrapper").css("height",i+"px"),o=t-n,e("#sidebar .sidebar_contents_wrapper").css("height",o+"px")},this.activate_sidebar=function(t){var n;"2001"==(n=e("#"+t+"_sidebar").css("z-index"))&&(e(".sidebar_container").css("z-index","2001"),e("#sidebar_tabs h2 a").removeClass("active-tab"),e("#"+t+"_sidebar").css("z-index","2010").css("display","block"),e("#sidebar_tabs #"+t+"_header h2 a").addClass("active-tab"))},this.enable_buttons=function(){e("#switcher .navigation-button").on("click",function(e){e.preventDefault(),t.show_nav()}),e("#switcher .content-button").on("click",function(e){e.preventDefault(),t.show_content()}),e("#switcher .comments-button").on("click",function(e){e.preventDefault(),t.show_comments(),t.activate_sidebar("comments")}),e("#switcher .activity-button").on("click",function(e){e.preventDefault(),t.show_activity(),t.activate_sidebar("activity")})},this.show_nav=function(){e("body").toggleClass("active-nav").removeClass("active-sidebar"),e("body").hasClass("active-nav")?CommentPress.theme.switcher.set_active("nav"):CommentPress.theme.switcher.set_active("content")},this.show_content=function(){e("body").removeClass("active-sidebar").removeClass("active-nav"),CommentPress.theme.switcher.set_active("content")},this.show_discuss=function(){e("body").toggleClass("active-sidebar").removeClass("active-nav"),CommentPress.theme.switcher.set_active("discuss")},this.show_comments=function(){"discuss"!=CommentPress.theme.switcher.get_active()?(t.show_discuss(),t.activate_sidebar("comments")):"comments"!=CommentPress.theme.switcher.get_discuss()?t.activate_sidebar("comments"):t.show_content(),CommentPress.theme.switcher.set_discuss("comments")},this.show_activity=function(){"discuss"!=CommentPress.theme.switcher.get_active()?(t.show_discuss(),t.activate_sidebar("activity")):"activity"!=CommentPress.theme.switcher.get_discuss()?t.activate_sidebar("activity"):t.show_content(),CommentPress.theme.switcher.set_discuss("activity")}},CommentPress.theme.viewport=new function(){var t=this,e=jQuery.noConflict();this.init=function(){},this.dom_ready=function(){t.track_resize(),t.track_scrolling()},this.track_resize=function(){e(window).on("resize",function(){CommentPress.theme.sidebars.set_height(),"y"==CommentPress.settings.DOM.get_wp_adminbar()?e("html body #switcher").css("top",e("#wpadminbar").height()+"px"):e("html body #switcher").css("top","0px")})},this.track_scrolling=function(){e(window).on("scroll",function(){var t,n,i,o,s,a;if("absolute"==(position="y"==CommentPress.settings.DOM.get_wp_adminbar()?(i=e("#wpadminbar")).css("position"):"static")){if(n=i.height(),o=i.position(),parseInt(s=window.pageYOffset-(o.top+n))>0){if("0"==(a=e.px_to_num(e("html body #content_container #sidebar").css("top"))))return;e("html body #content_container #sidebar,html body #content_container #navigation").css("top","0"),e("html body #switcher").css("top","0"),t=e(window).height(),e("#toc_sidebar .sidebar_contents_wrapper").css("height",t+"px"),e("#sidebar .sidebar_contents_wrapper").css("height",t+"px")}else{if((a=e.px_to_num(e("html body #content_container #sidebar").css("top")))==n)return;e("html body #content_container #sidebar,html body #content_container #navigation").css("top",n+"px"),e("html body #switcher").css("top",n+"px"),CommentPress.theme.sidebars.set_height()}}else("1"==cp_is_mobile||"1"==cp_is_tablet)&&("y"==CommentPress.settings.DOM.get_wp_adminbar()?e("html body #switcher").css("top",i.height()+"px"):e("html body #switcher").css("top","0px"),CommentPress.theme.sidebars.set_height())})},this.scroll_to_top=function(t,n){var i;void 0!==t&&("0"==cp_is_mobile||"1"==cp_is_tablet)&&(0==t&&void 0!==(i=e(".comments_container").prop("id"))&&(t=e("#post-"+(target_id=i.split("-")[1]))),e(window).stop(!0).scrollTo(t,{duration:1.5*n,axis:"y",offset:CommentPress.theme.header.get_offset()}))},this.on_load_scroll_to_anchor=function(){var n,i,o,s,a,c;if(n="",c=!1,(i=document.location.toString()).match("#comment-")){tmp=i.split("#comment-"),o=0,2==tmp.length&&(o=parseInt(tmp[1])),0!==o&&t.on_load_scroll_to_comment(o),CommentPress.common.DOM.location_reset();return}if(e("span.para_marker > a").each(function(n){var o;o=e(this).prop("id"),(i.match("#"+o)||i.match("#para_heading-"+o))&&(t.align_content(o,"para_heading"),CommentPress.common.DOM.location_reset(),c=!0)}),!0!==c){if(i.match("#respond")){CommentPress.theme.sidebars.show_comments(),i.match("replytocom")?(comment_parent=parseInt(e("#comment_parent").val()),t.on_load_scroll_to_comment(comment_parent)):i.match("replytopara")?(n=e("#text_signature").val(),t.align_content(n,"commentform")):e("h3#para_heading- a.comment_block_permalink").click(),CommentPress.common.DOM.location_reset();return}if(i.match("#")){(a=e("#"+(s=i.split("#")[1]))).length&&CommentPress.common.content.scroll_page(a),CommentPress.common.DOM.location_reset();return}}},this.on_load_scroll_to_comment=function(t){var n,i,o,s,a,c,r;CommentPress.theme.sidebars.show_comments(),(i=e("#comment-"+t).parents("div.paragraph_wrapper").map(function(){return this})).length>0&&(n=(o=e(i[0])).prop("id").split("-")[1],"y"==cp_comments_open&&(a=(s=e("#para_wrapper-"+n+" .reply_to_para").prop("id")).split("-")[1],c=e("#comment_post_ID").prop("value"),"1"==cp_tinymce?""!==e("#comment-"+t+" > .reply").text()&&(cp_tinymce="0",addComment.moveForm("comment-"+t,t,"respond",c,n),cp_tinymce="1",addComment.disableForm(),addComment.enableForm()):addComment.moveForm("comment-"+t,t,"respond",c,n)),o.show(),CommentPress.common.comments.scroll_comments(e("#comment-"+t),1,"flash"),""!==n?(r=e("#textblock-"+n),e.highlight_para(r),CommentPress.common.content.scroll_page(r)):(CommentPress.settings.page.get_highlight()||CommentPress.theme.viewport.scroll_to_top(0,cp_scroll_speed),CommentPress.settings.page.toggle_highlight()))},this.align_content=function(t,n){var i,o,s,a,c,r,m,h,p,d;if("none"!=n){if(CommentPress.theme.sidebars.show_comments(),0!=(i=e("#para_heading-"+t).next("div.paragraph_wrapper")).length){if(o=e("#para_wrapper-"+t+" .commentlist"),s=i.find("#respond"),a=addComment.getLevel(),c=!1,"none"==(r=i.css("display"))&&(c=!0),e.unhighlight_para(),""!==t&&(m=e("#textblock-"+t),("1"!=cp_promote_reading||c)&&(e.highlight_para(m),CommentPress.common.content.scroll_page(m))),"0"==cp_promote_reading){if("y"==cp_comments_open&&(h=e("#comment_post_ID").prop("value"),d=(p=e("#para_wrapper-"+t+" .reply_to_para").prop("id")).split("-")[1]),s[0]||"y"!=cp_comments_open||addComment.moveFormToPara(d,t,h),s[0]&&!a){"y"==cp_comments_open?(addComment.moveFormToPara(d,t,h),"para_heading"==n?CommentPress.common.comments.scroll_comments(e("#para_heading-"+t),cp_scroll_speed):CommentPress.common.comments.scroll_comments(e("#respond"),cp_scroll_speed)):CommentPress.common.comments.scroll_comments(e("#para_heading-"+t),cp_scroll_speed);return}if(!s[0]&&o[0]&&!c||!c&&o[0]||s[0]&&!o[0]&&!c){"y"==cp_comments_open?"para_heading"==n?CommentPress.common.comments.scroll_comments(e("#para_heading-"+t),cp_scroll_speed):CommentPress.common.comments.scroll_comments(e("#respond"),cp_scroll_speed):CommentPress.common.comments.scroll_comments(e("#para_heading-"+t),cp_scroll_speed);return}c||o[0]||(i.css("display","none"),c=!0)}i.slideToggle("slow",function(){"1"==cp_promote_reading&&c?CommentPress.common.comments.scroll_comments(e("#para_heading-"+t),cp_scroll_speed):c&&("y"==cp_comments_open?"para_heading"==n?CommentPress.common.comments.scroll_comments(e("#para_heading-"+t),cp_scroll_speed):CommentPress.common.comments.scroll_comments(e("#respond"),cp_scroll_speed):CommentPress.common.comments.scroll_comments(e("#para_heading-"+t),cp_scroll_speed))})}}}},CommentPress.theme.flat={},CommentPress.theme.settings.init(),CommentPress.theme.DOM.init(),CommentPress.theme.header.init(),CommentPress.theme.switcher.init(),CommentPress.theme.navigation.init(),CommentPress.theme.content.init(),CommentPress.theme.sidebars.init(),CommentPress.theme.viewport.init(),jQuery(document).ready(function(t){CommentPress.theme.settings.dom_ready(),CommentPress.theme.DOM.dom_ready(),CommentPress.theme.header.dom_ready(),CommentPress.theme.switcher.dom_ready(),CommentPress.theme.navigation.dom_ready(),CommentPress.theme.content.dom_ready(),CommentPress.theme.sidebars.dom_ready(),CommentPress.theme.viewport.dom_ready(),CommentPress.common.comments.comment_rollovers(),t(document).on("commentpress-comment-highlight",function(e,n){t("#li-comment-"+n+" > .comment-wrapper").addClass("background-highlight")}),t(document).on("commentpress-comment-unhighlight",function(t,e){jQuery("#li-comment-"+e+" > .comment-wrapper").removeClass("background-highlight")}),t(document).on("commentpress-comment-highlights-clear",function(t){jQuery(".comment-wrapper").removeClass("background-highlight")}),"1"==cp_special_page?setTimeout(function(){CommentPress.common.content.on_load_scroll_to_comment()},100):setTimeout(function(){CommentPress.theme.viewport.on_load_scroll_to_anchor()},100),t(document).trigger("commentpress-document-ready")});
