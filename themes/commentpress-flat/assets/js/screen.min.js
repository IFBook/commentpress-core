CommentPress.theme={},CommentPress.theme.settings=new function(){jQuery.noConflict();this.init=function(){},this.dom_ready=function(){}},CommentPress.theme.DOM=new function(){var e=this,t=jQuery.noConflict();this.init=function(){e.head(),t("html").addClass("js")},this.dom_ready=function(){},this.head=function(){var e;e="",document.getElementById&&(e+='<style type="text/css" media="screen">',"0"==cp_is_mobile&&"0"==cp_textblock_meta&&(e+="#content .textblock span.para_marker, #content .textblock span.commenticonbox { display: none; } ",e+=".content .textblock span.para_marker, .content .textblock span.commenticonbox { display: none; } "),e+="ul.all_comments_listing div.item_body { display: none; } ","y"==CommentPress.settings.DOM.get_wp_adminbar()&&"32"==CommentPress.settings.DOM.get_wp_adminbar_height()&&(e+="@media screen and ( max-width: 782px ) { body.admin-bar #sidebar, #sidebar, body.admin-bar #navigation, #navigation { top: "+CommentPress.settings.DOM.get_wp_adminbar_expanded()+"px; }  } "),"0"==cp_show_subpages&&(e+="#toc_sidebar .sidebar_contents_wrapper ul li ul { display: none; } ",e+="#toc_sidebar .sidebar_contents_wrapper ul li.current_page_ancestor > ul { display: block; } ",e+="#toc_sidebar .sidebar_contents_wrapper ul li.current-menu-ancestor > ul { display: block; } ",e+="#toc_sidebar .sidebar_contents_wrapper ul li.current_page_item > ul { display: block; } "),"0"==cp_special_page&&(e+="#respond { display: none; } "),e+="#sidebar .paragraph_wrapper { display: none; } ",e+="#navigation .paragraph_wrapper { display: none; } ",e+="#sidebar .paragraph_wrapper.start_open { display: block; } ",e+="#navigation .paragraph_wrapper.start_open { display: block; } ",e+=".commentpress_page #navigation .paragraph_wrapper.special_pages_wrapper { display: block; } ",e+=".cp_sidebar_activity #comments_sidebar { display: none; } ",e+="#original .post, #literal .post { display: none; } ",e+="</style>"),document.write(e)}},CommentPress.theme.header=new function(){jQuery.noConflict();this.init=function(){},this.dom_ready=function(){},this.get_offset=function(){var e;return e=-72,"y"==CommentPress.settings.DOM.get_wp_adminbar()&&(e-=CommentPress.settings.DOM.get_wp_adminbar_height()),e}},CommentPress.theme.switcher=new function(){var e=this,t=jQuery.noConflict();this.init=function(){e.init_active()},this.dom_ready=function(){e.init_discuss()},e.active="content",this.init_active=function(){},this.get_active=function(){return e.active},this.set_active=function(t){e.active=t},e.discuss="comments",this.init_discuss=function(){t("body").hasClass("cp_sidebar_activity")&&e.set_discuss("activity")},this.get_discuss=function(){return e.discuss},this.set_discuss=function(t){e.discuss=t}},CommentPress.theme.navigation=new function(){var e=this,t=jQuery.noConflict();this.init=function(){},this.dom_ready=function(){e.menu()},this.menu=function(){t("#toc_sidebar").on("click","ul#nav li a",function(e){t(this).parent().find("ul").length>0&&(t(this).next("ul").slideToggle(),e.preventDefault())})}},CommentPress.theme.content=new function(){var e=this,t=jQuery.noConflict();this.init=function(){},this.dom_ready=function(){e.tabs()},this.tabs=function(){t("#page_wrapper").css("min-height"),t("#page_wrapper").css("padding-bottom")}},CommentPress.theme.sidebars=new function(){var e=this,t=jQuery.noConflict();this.init=function(){},this.dom_ready=function(){e.enable_buttons(),e.set_height()},this.set_height=function(){var e,s,n,o;e=t(window).height(),"1"!=cp_is_mobile&&"1"!=cp_is_tablet||(window_inner=window.innerHeight,e<window_inner&&(e=window_inner)),s="y"==CommentPress.settings.DOM.get_wp_adminbar()?t("#wpadminbar").height():0,t("html body #content_container #sidebar,html body #content_container #navigation").css("top",s+"px"),n=e-s,t("#toc_sidebar .sidebar_contents_wrapper").css("height",n+"px"),o=e-s,t("#sidebar .sidebar_contents_wrapper").css("height",o+"px")},this.activate_sidebar=function(e){"2001"==t("#"+e+"_sidebar").css("z-index")&&(t(".sidebar_container").css("z-index","2001"),t("#sidebar_tabs h2 a").removeClass("active-tab"),t("#"+e+"_sidebar").css("z-index","2010").css("display","block"),t("#sidebar_tabs #"+e+"_header h2 a").addClass("active-tab"))},this.enable_buttons=function(){t("#switcher .navigation-button").on("click",function(t){t.preventDefault(),e.show_nav()}),t("#switcher .content-button").on("click",function(t){t.preventDefault(),e.show_content()}),t("#switcher .comments-button").on("click",function(t){t.preventDefault(),e.show_comments(),e.activate_sidebar("comments")}),t("#switcher .activity-button").on("click",function(t){t.preventDefault(),e.show_activity(),e.activate_sidebar("activity")})},this.show_nav=function(){t("body").toggleClass("active-nav").removeClass("active-sidebar"),t("body").hasClass("active-nav")?CommentPress.theme.switcher.set_active("nav"):CommentPress.theme.switcher.set_active("content")},this.show_content=function(){t("body").removeClass("active-sidebar").removeClass("active-nav"),CommentPress.theme.switcher.set_active("content")},this.show_discuss=function(){t("body").toggleClass("active-sidebar").removeClass("active-nav"),CommentPress.theme.switcher.set_active("discuss")},this.show_comments=function(){"discuss"!=CommentPress.theme.switcher.get_active()?(e.show_discuss(),e.activate_sidebar("comments")):"comments"!=CommentPress.theme.switcher.get_discuss()?e.activate_sidebar("comments"):e.show_content(),CommentPress.theme.switcher.set_discuss("comments")},this.show_activity=function(){"discuss"!=CommentPress.theme.switcher.get_active()?(e.show_discuss(),e.activate_sidebar("activity")):"activity"!=CommentPress.theme.switcher.get_discuss()?e.activate_sidebar("activity"):e.show_content(),CommentPress.theme.switcher.set_discuss("activity")}},CommentPress.theme.viewport=new function(){var e=this,t=jQuery.noConflict();this.init=function(){},this.dom_ready=function(){e.track_resize(),e.track_scrolling()},this.track_resize=function(){t(window).on("resize",function(){CommentPress.theme.sidebars.set_height(),"y"==CommentPress.settings.DOM.get_wp_adminbar()?t("html body #switcher").css("top",t("#wpadminbar").height()+"px"):t("html body #switcher").css("top","0px")})},this.track_scrolling=function(){t(window).on("scroll",function(){var e,s,n,o,i;if("y"==CommentPress.settings.DOM.get_wp_adminbar()?(n=t("#wpadminbar"),position=n.css("position")):position="static","absolute"==position)if(s=n.height(),o=n.position(),i=window.pageYOffset-(o.top+s),parseInt(i)>0){if("0"==t.px_to_num(t("html body #content_container #sidebar").css("top")))return;t("html body #content_container #sidebar,html body #content_container #navigation").css("top","0"),t("html body #switcher").css("top","0"),e=t(window).height(),t("#toc_sidebar .sidebar_contents_wrapper").css("height",e+"px"),t("#sidebar .sidebar_contents_wrapper").css("height",e+"px")}else{if(t.px_to_num(t("html body #content_container #sidebar").css("top"))==s)return;t("html body #content_container #sidebar,html body #content_container #navigation").css("top",s+"px"),t("html body #switcher").css("top",s+"px"),CommentPress.theme.sidebars.set_height()}else"1"!=cp_is_mobile&&"1"!=cp_is_tablet||("y"==CommentPress.settings.DOM.get_wp_adminbar()?t("html body #switcher").css("top",n.height()+"px"):t("html body #switcher").css("top","0px"),CommentPress.theme.sidebars.set_height())})},this.scroll_to_top=function(e,s){var n;void 0!==e&&("0"!=cp_is_mobile&&"1"!=cp_is_tablet||(0==e&&void 0!==(n=t(".comments_container").prop("id"))&&(target_id=n.split("-")[1],e=t("#post-"+target_id)),t(window).stop(!0).scrollTo(e,{duration:1.5*s,axis:"y",offset:CommentPress.theme.header.get_offset()})))},this.on_load_scroll_to_anchor=function(){var s,n,o,i,m,c;return s="",c=!1,(n=document.location.toString()).match("#comment-")?(tmp=n.split("#comment-"),o=0,2==tmp.length&&(o=parseInt(tmp[1])),0!==o&&e.on_load_scroll_to_comment(o),void CommentPress.common.DOM.location_reset()):(t("span.para_marker > a").each(function(s){var o;o=t(this).prop("id"),(n.match("#"+o)||n.match("#para_heading-"+o))&&(e.align_content(o,"para_heading"),CommentPress.common.DOM.location_reset(),c=!0)}),!0!==c?n.match("#respond")?(CommentPress.theme.sidebars.show_comments(),n.match("replytocom")?(comment_parent=parseInt(t("#comment_parent").val()),e.on_load_scroll_to_comment(comment_parent)):n.match("replytopara")?(s=t("#text_signature").val(),e.align_content(s,"commentform")):t("h3#para_heading- a.comment_block_permalink").click(),void CommentPress.common.DOM.location_reset()):n.match("#")?(i=n.split("#")[1],(m=t("#"+i)).length&&CommentPress.common.content.scroll_page(m),void CommentPress.common.DOM.location_reset()):void 0:void 0)},this.on_load_scroll_to_comment=function(e){var s,n,o,i,m;CommentPress.theme.sidebars.show_comments(),(n=t("#comment-"+e).parents("div.paragraph_wrapper").map(function(){return this})).length>0&&(s=(o=t(n[0])).prop("id").split("-")[1],"y"==cp_comments_open&&(t("#para_wrapper-"+s+" .reply_to_para").prop("id").split("-")[1],i=t("#comment_post_ID").prop("value"),"1"==cp_tinymce?""!==t("#comment-"+e+" > .reply").text()&&(cp_tinymce="0",addComment.moveForm("comment-"+e,e,"respond",i,s),cp_tinymce="1"):addComment.moveForm("comment-"+e,e,"respond",i,s)),o.show(),CommentPress.common.comments.scroll_comments(t("#comment-"+e),1,"flash"),""!==s?(m=t("#textblock-"+s),t.highlight_para(m),CommentPress.common.content.scroll_page(m)):(CommentPress.settings.page.get_highlight()||CommentPress.theme.viewport.scroll_to_top(0,cp_scroll_speed),CommentPress.settings.page.toggle_highlight()))},this.align_content=function(e,s){var n,o,i,m,c,r,a,_;if("none"!=s&&(CommentPress.theme.sidebars.show_comments(),0!=(n=t("#para_heading-"+e).next("div.paragraph_wrapper")).length)){if(o=t("#para_wrapper-"+e+" .commentlist"),i=n.find("#respond"),m=addComment.getLevel(),c=!1,"none"==n.css("display")&&(c=!0),t.unhighlight_para(),""!==e&&(r=t("#textblock-"+e),("1"!=cp_promote_reading||c)&&(t.highlight_para(r),CommentPress.common.content.scroll_page(r))),"0"==cp_promote_reading){if("y"==cp_comments_open&&(a=t("#comment_post_ID").prop("value"),_=t("#para_wrapper-"+e+" .reply_to_para").prop("id").split("-")[1]),i[0]||"y"==cp_comments_open&&addComment.moveFormToPara(_,e,a),i[0]&&!m)return void("y"==cp_comments_open?(addComment.moveFormToPara(_,e,a),"para_heading"==s?CommentPress.common.comments.scroll_comments(t("#para_heading-"+e),cp_scroll_speed):CommentPress.common.comments.scroll_comments(t("#respond"),cp_scroll_speed)):CommentPress.common.comments.scroll_comments(t("#para_heading-"+e),cp_scroll_speed));if(!i[0]&&o[0]&&!c)return void("y"==cp_comments_open?"para_heading"==s?CommentPress.common.comments.scroll_comments(t("#para_heading-"+e),cp_scroll_speed):CommentPress.common.comments.scroll_comments(t("#respond"),cp_scroll_speed):CommentPress.common.comments.scroll_comments(t("#para_heading-"+e),cp_scroll_speed));if(!c&&o[0])return void("y"==cp_comments_open?"para_heading"==s?CommentPress.common.comments.scroll_comments(t("#para_heading-"+e),cp_scroll_speed):CommentPress.common.comments.scroll_comments(t("#respond"),cp_scroll_speed):CommentPress.common.comments.scroll_comments(t("#para_heading-"+e),cp_scroll_speed));if(i[0]&&!o[0]&&!c)return void("y"==cp_comments_open?"para_heading"==s?CommentPress.common.comments.scroll_comments(t("#para_heading-"+e),cp_scroll_speed):CommentPress.common.comments.scroll_comments(t("#respond"),cp_scroll_speed):CommentPress.common.comments.scroll_comments(t("#para_heading-"+e),cp_scroll_speed));c||o[0]||(n.css("display","none"),c=!0)}n.slideToggle("slow",function(){"1"==cp_promote_reading&&c?CommentPress.common.comments.scroll_comments(t("#para_heading-"+e),cp_scroll_speed):c&&("y"==cp_comments_open?"para_heading"==s?CommentPress.common.comments.scroll_comments(t("#para_heading-"+e),cp_scroll_speed):CommentPress.common.comments.scroll_comments(t("#respond"),cp_scroll_speed):CommentPress.common.comments.scroll_comments(t("#para_heading-"+e),cp_scroll_speed))})}}},CommentPress.theme.flat={},CommentPress.theme.settings.init(),CommentPress.theme.DOM.init(),CommentPress.theme.header.init(),CommentPress.theme.switcher.init(),CommentPress.theme.navigation.init(),CommentPress.theme.content.init(),CommentPress.theme.sidebars.init(),CommentPress.theme.viewport.init(),jQuery(document).ready(function(e){CommentPress.theme.settings.dom_ready(),CommentPress.theme.DOM.dom_ready(),CommentPress.theme.header.dom_ready(),CommentPress.theme.switcher.dom_ready(),CommentPress.theme.navigation.dom_ready(),CommentPress.theme.content.dom_ready(),CommentPress.theme.sidebars.dom_ready(),CommentPress.theme.viewport.dom_ready(),CommentPress.common.comments.comment_rollovers(),e(document).on("commentpress-comment-highlight",function(t,s){e("#li-comment-"+s+" > .comment-wrapper").addClass("background-highlight")}),e(document).on("commentpress-comment-unhighlight",function(e,t){jQuery("#li-comment-"+t+" > .comment-wrapper").removeClass("background-highlight")}),e(document).on("commentpress-comment-highlights-clear",function(e){jQuery(".comment-wrapper").removeClass("background-highlight")}),"1"==cp_special_page?setTimeout(function(){CommentPress.common.content.on_load_scroll_to_comment()},100):setTimeout(function(){CommentPress.theme.viewport.on_load_scroll_to_anchor()},100),e(document).trigger("commentpress-document-ready")});
