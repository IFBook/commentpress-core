var cp_book_header_height,cp_header_animating,cp_toc_on_top,page_highlight,cp_header_minimised,cp_sidebar_minimised,cp_container_top_max,cp_container_top_min;cp_header_animating=!1,cp_toc_on_top="n",page_highlight=!1,cp_header_minimised=jQuery.cookie("cp_header_minimised"),(void 0===cp_header_minimised||null===cp_header_minimised)&&(cp_header_minimised="n"),cp_sidebar_minimised=jQuery.cookie("cp_sidebar_minimised"),(void 0===cp_sidebar_minimised||null===cp_sidebar_minimised)&&(cp_sidebar_minimised="n"),cp_container_top_max=jQuery.cookie("cp_container_top_max"),(void 0===cp_container_top_max||null===cp_container_top_max)&&(cp_container_top_max=108),cp_container_top_min=jQuery.cookie("cp_container_top_min"),(void 0===cp_container_top_min||null===cp_container_top_min)&&(cp_container_top_min=108),"y"==cp_bp_adminbar&&(cp_wp_adminbar_height=25,cp_wp_adminbar="y"),"y"==cp_wp_adminbar&&(cp_container_top_max=parseInt(cp_container_top_max)+cp_wp_adminbar_height,cp_container_top_min=parseInt(cp_container_top_min)+cp_wp_adminbar_height),CommentPress.theme={},CommentPress.theme.DOM=new function(){var e=this,i=jQuery.noConflict();this.init=function(){e.head()},this.head=function(){var e,t,n,o;e="",document.getElementById&&(e+='<style type="text/css" media="screen">',"0"==cp_is_mobile&&"0"==cp_textblock_meta&&(e+="#content .textblock span.para_marker, #content .textblock span.commenticonbox { display: none; } ",e+=".content .textblock span.para_marker, .content .textblock span.commenticonbox { display: none; } "),e+="ul.all_comments_listing div.item_body { display: none; } ","y"==cp_wp_adminbar&&(e+="#header { top: "+cp_wp_adminbar_height+"px; } ",e+="#book_header { top: "+(cp_wp_adminbar_height+32)+"px; } ","32"==cp_wp_adminbar_height&&(e+="@media screen and ( max-width: 782px ) { #header { top: "+cp_wp_adminbar_expanded+"px; }#book_header { top: "+(cp_wp_adminbar_expanded+32)+"px; } } ")),"0"==cp_show_subpages&&(e+="#toc_sidebar .sidebar_contents_wrapper ul li ul { display: none; } "),void 0===cp_header_minimised||null===cp_header_minimised||"n"==cp_header_minimised?(t=cp_container_top_max,"y"==cp_wp_adminbar&&(t=cp_container_top_max-cp_wp_adminbar_height),e+="#container { top: "+t+"px; } ",e+="#sidebar { top: "+cp_container_top_max+"px; } ","y"==cp_wp_adminbar&&"32"==cp_wp_adminbar_height&&(e+="@media screen and ( max-width: 782px ) { #sidebar { top: "+(t+cp_wp_adminbar_expanded)+"px; } } ")):(e+="#book_header { display: none; } ",t=cp_container_top_min,"y"==cp_wp_adminbar&&(t=cp_container_top_min-cp_wp_adminbar_height),e+="#container { top: "+t+"px; } ",e+="#sidebar { top: "+cp_container_top_min+"px; } ","y"==cp_wp_adminbar&&"32"==cp_wp_adminbar_height&&(e+="@media screen and ( max-width: 782px ) { #sidebar { top: "+(t+cp_wp_adminbar_expanded)+"px; } } ")),"0"==cp_special_page&&(e+=".paragraph_wrapper { display: none; } ",e+="#respond { display: none; } ","y"==cp_sidebar_minimised&&(e+="#comments_sidebar .sidebar_contents_wrapper { display: none; } ")),e+="#activity_sidebar .paragraph_wrapper { display: none; } ",i.cookie("cp_container_width")&&(n=i.cookie("cp_container_width"),e+="1"==cp_is_signup_page?"#content { width: "+n+"%; } ":"#page_wrapper { width: "+n+"%; } ",e+="#footer { width: "+n+"%; } "),i.cookie("cp_book_nav_width")&&(o=i.cookie("cp_book_nav_width"),e+="#book_nav div#cp_book_nav { width: "+o+"%; } "),i.cookie("cp_sidebar_width")&&(e+="#sidebar { width: "+i.cookie("cp_sidebar_width")+"%; } "),i.cookie("cp_sidebar_left")&&(e+="#sidebar { left: "+i.cookie("cp_sidebar_left")+"%; } "),e+="ul#sidebar_tabs, #toc_header.sidebar_header, body.blog_post #activity_header.sidebar_header { display: block; } ","1"==cp_is_mobile&&"0"==cp_is_tablet&&(e+=".sidebar_contents_wrapper { height: auto; } "),e+="</style>"),document.write(e)},this.layout=function(){var e;e=i("1"==cp_is_signup_page?"#content":"#page_wrapper"),e.each(function(e){var t,n,o,a,_,p,r,c,s,m,d,h,l;t=i(this),n=i("#content"),o=i("#sidebar"),a=i("#footer"),_=i("#book_header"),p=i("#book_nav_wrapper"),r=i("#cp_book_nav"),c=i("#cp_book_info"),s=t.width(),m=o.width(),l=o.offset().left-s,t.resizable({handles:"e",minWidth:cp_min_page_width,alsoResize:"#footer",start:function(e,i){s=t.width(),m=o.width(),d=r.width(),h=o.css("left"),l=o.offset().left-s},resize:function(e,i){var n;t.css("height","auto"),a.css("height","auto"),o.css("left",t.width()+l+"px"),n=s-t.width(),o.css("width",m+n+"px"),r.css("width",d-n+"px")},stop:function(e,a){var _,p,c,s,m,d,h;_=parseFloat(i(window).width()),p=t.width(),i.browser.webkit&&(p+=1),c=parseFloat(Math.ceil(1e6*parseFloat(p)/_)/1e4),t.css("width",c+"%"),"0"==cp_is_signup_page&&n.css("width","auto"),p=r.width(),i.browser.webkit&&(p+=1),s=parseFloat(Math.ceil(1e6*parseFloat(p)/_)/1e4),r.css("width",s+"%"),p=o.width(),i.browser.webkit&&(p+=1),m=parseFloat(Math.ceil(1e6*parseFloat(p)/_)/1e4),o.css("width",m+"%"),d=o.position().left,i.browser.webkit&&(d+=1),h=parseFloat(Math.ceil(1e6*parseFloat(d)/_)/1e4),o.css("left",h+"%"),i.cookie("cp_container_width",c.toString(),{expires:28,path:cp_cookie_path}),i.cookie("cp_book_nav_width",s.toString(),{expires:28,path:cp_cookie_path}),i.cookie("cp_sidebar_left",h.toString(),{expires:28,path:cp_cookie_path}),i.cookie("cp_sidebar_width",m.toString(),{expires:28,path:cp_cookie_path})}})})}},CommentPress.theme.header=new function(){var e=jQuery.noConflict();this.init=function(){},this.get_offset=function(){var i;return i=0-e.px_to_num(e("#container").css("top")),"y"==cp_wp_adminbar&&(i-=cp_wp_adminbar_height),i}},CommentPress.theme.navigation=new function(){var e=this,i=jQuery.noConflict();this.init=function(){e.menu()},this.menu=function(){i("#sidebar").on("click","#toc_header h2 a",function(e){e.preventDefault(),CommentPress.theme.sidebars.activate_sidebar("toc")})}},CommentPress.theme.content=new function(){var e=this,i=jQuery.noConflict();this.init=function(){e.tabs()},this.tabs=function(){var e,t;e=i("#content").css("min-height"),t=i("#content").css("padding-bottom"),i("#literal .post").css("display","none"),i("#original .post").css("display","none"),CommentPress.setup.content.workflow_tabs(e,t)}},CommentPress.theme.sidebars=new function(){var e=this,i=jQuery.noConflict();this.init=function(){},this.activate_sidebar=function(t){var n,o,a;n=i("#"+t+"_sidebar").css("z-index"),"2001"==n&&(i(".sidebar_container").css("z-index","2001"),i("#"+t+"_sidebar").css("z-index","2010"),o=e.get_top(),a=e.get_top_border(),i(".sidebar_header").css("height",o-a+"px"),i("#"+t+"_header.sidebar_header").css("height",o+"px"),cp_toc_on_top="y"),"0"==cp_is_mobile||"1"==cp_is_tablet?i.set_sidebar_height():(i(".sidebar_container").css("visibility","hidden"),i("#"+t+"_sidebar").css("visibility","visible"))},this.get_top=function(){return i.px_to_num(i("#toc_sidebar").css("top"))},this.get_top_border=function(){return i.px_to_num(i(".sidebar_minimiser").css("borderTopWidth"))}},CommentPress.theme.viewport=new function(){var e=jQuery.noConflict();this.init=function(){},this.scroll_to_top=function(i,t){"undefined"!=typeof i&&("0"==cp_is_mobile||"1"==cp_is_tablet)&&e.scrollTo(i,t)},this.on_load_scroll_to_anchor=function(){var i,t,n,o,a,_,p,r,c,s,m;if(i="",t=document.location.toString(),t.match("#comment-")){if(CommentPress.theme.sidebars.activate_sidebar("comments"),n=t.split("#comment-")[1],o=e("#comment-"+n).parents("div.paragraph_wrapper").map(function(){return this}),o.length>0)return a=e(o[0]),"y"==cp_comments_open&&(i=a.prop("id").split("-")[1],_=e("#para_wrapper-"+i+" .reply_to_para").prop("id"),p=_.split("-")[1],r=e("#comment_post_ID").prop("value"),"1"==cp_tinymce?""!==e("#comment-"+n+" > .reply").text()&&(cp_tinymce="0",addComment.moveForm("comment-"+n,n,"respond",r,i),cp_tinymce="1"):addComment.moveForm("comment-"+n,n,"respond",r,i)),a.show(),e.scroll_comments(e("#comment-"+n),1,"flash"),void(""!==i?(c=e("#textblock-"+i),e.highlight_para(c),e.scroll_page(c)):(page_highlight===!1&&CommentPress.theme.viewport.scroll_to_top(0,cp_scroll_speed),page_highlight=!page_highlight))}else e("span.para_marker > a").each(function(i){var n,o,a,_,p;return n=e(this).prop("id"),t.match("#"+n)||t.match("#para_heading-"+n)?("y"==cp_comments_open&&(o=e("#para_wrapper-"+n+" .reply_to_para").prop("id"),a=o.split("-")[1],_=e("#comment_post_ID").prop("value"),addComment.moveFormToPara(a,n,_)),e("#para_heading-"+n).next("div.paragraph_wrapper").show(),e.scroll_comments(e("#para_heading-"+n),1),p=e("#textblock-"+n),e.highlight_para(p),void e.scroll_page(p)):void 0});if(t.match("#respond"))return void e("h3#para_heading- a.comment_block_permalink").click();if(t.match("#")){if(s=t.split("#")[1],"edit=true"==s)return;if("fee-edit-link"==s)return;return m=e("#"+s),void(m.length&&(m.addClass("selected_para"),e.scroll_page(m)))}},this.align_content=function(i,t){CommentPress.theme.sidebars.activate_sidebar("comments");var n,o,a,_,p,r,c,s,m,d;if(n=e("#para_heading-"+i).next("div.paragraph_wrapper"),0!=n.length){if(o=e("#para_wrapper-"+i+" .commentlist"),a=n.find("#respond"),_=addComment.getLevel(),p=!1,r=n.css("display"),"none"==r&&(p=!0),e.unhighlight_para(),""!==i&&(c=e("#textblock-"+i),("1"!=cp_promote_reading||p)&&(e.highlight_para(c),e.scroll_page(c))),"0"==cp_promote_reading){if("y"==cp_comments_open&&(s=e("#comment_post_ID").prop("value"),m=e("#para_wrapper-"+i+" .reply_to_para").prop("id"),d=m.split("-")[1]),a[0]||"y"==cp_comments_open&&addComment.moveFormToPara(d,i,s),a[0]&&!_)return void("y"==cp_comments_open?(addComment.moveFormToPara(d,i,s),"marker"==t?e.scroll_comments(e("#para_heading-"+i),cp_scroll_speed):e.scroll_comments(e("#respond"),cp_scroll_speed)):e.scroll_comments(e("#para_heading-"+i),cp_scroll_speed));if(!a[0]&&o[0]&&!p)return void("y"==cp_comments_open?"marker"==t?e.scroll_comments(e("#para_heading-"+i),cp_scroll_speed):e.scroll_comments(e("#respond"),cp_scroll_speed):e.scroll_comments(e("#para_heading-"+i),cp_scroll_speed));if(!p&&o[0])return void("y"==cp_comments_open?"marker"==t?e.scroll_comments(e("#para_heading-"+i),cp_scroll_speed):e.scroll_comments(e("#respond"),cp_scroll_speed):e.scroll_comments(e("#para_heading-"+i),cp_scroll_speed));if(a[0]&&!o[0]&&!p)return void("y"==cp_comments_open?"marker"==t?e.scroll_comments(e("#para_heading-"+i),cp_scroll_speed):e.scroll_comments(e("#respond"),cp_scroll_speed):e.scroll_comments(e("#para_heading-"+i),cp_scroll_speed));p||o[0]||(n.css("display","none"),p=!0)}n.slideToggle("slow",function(){"1"==cp_promote_reading&&p?e.scroll_comments(e("#para_heading-"+i),cp_scroll_speed):p&&("y"==cp_comments_open?"marker"==t?e.scroll_comments(e("#para_heading-"+i),cp_scroll_speed):e.scroll_comments(e("#respond"),cp_scroll_speed):e.scroll_comments(e("#para_heading-"+i),cp_scroll_speed))})}}},CommentPress.theme.original={},CommentPress.theme.original.header=new function(){var e=this,i=jQuery.noConflict();this.init=function(){e.minimiser()},this.minimiser=function(){i("#header").on("click","#btn_header_min",function(i){i.preventDefault(),e.toggle()})},this.toggle=function(){return cp_header_animating===!0?!1:(cp_header_animating=!0,void 0===cp_header_minimised||null===cp_header_minimised||"n"==cp_header_minimised?e.close():e.open(),cp_header_minimised="y"==cp_header_minimised?"n":"y",void i.cookie("cp_header_minimised",cp_header_minimised,{expires:28,path:cp_cookie_path}))},this.open=function(){var e,t,n,o,a,_,p;e=i("#book_nav").height(),t=i("#sidebar"),n=i.get_sidebar_pane(),o=i("#book_header"),a=i("#container"),_=cp_container_top_max,"y"==cp_wp_adminbar&&(_=cp_container_top_max-cp_wp_adminbar_height),a.animate({top:_+"px",duration:"fast"},function(){o.fadeIn("fast",function(){cp_header_animating=!1})}),"n"==cp_sidebar_minimised?(p=t.height()-cp_book_header_height,t.animate({top:cp_container_top_max+"px",height:p+"px",duration:"fast"},function(){t.css("height","auto")}),n.animate({height:n.height()-cp_book_header_height+"px",duration:"fast"},function(){("0"==cp_is_mobile||"1"==cp_is_tablet)&&i.set_sidebar_height(),cp_header_animating=!1})):t.animate({top:cp_container_top_max+"px",duration:"fast"},function(){cp_header_animating=!1,("0"==cp_is_mobile||"1"==cp_is_tablet)&&i.set_sidebar_height()})},this.close=function(){var e,t,n,o,a,_,p;e=i("#book_nav").height(),t=i("#sidebar"),n=i.get_sidebar_pane(),o=i("#book_header"),a=i("#container"),o.hide(),_=cp_container_top_min,"y"==cp_wp_adminbar&&(_=cp_container_top_min-cp_wp_adminbar_height),a.animate({top:_+"px",duration:"fast"}),"n"==cp_sidebar_minimised?(p=t.height()+cp_book_header_height,t.animate({top:cp_container_top_min+"px",height:p+"px",duration:"fast"},function(){t.css("height","auto")}),n.animate({height:n.height()+cp_book_header_height+"px",duration:"fast"},function(){("0"==cp_is_mobile||"1"==cp_is_tablet)&&i.set_sidebar_height(),cp_header_animating=!1})):t.animate({top:cp_container_top_min+"px",duration:"fast"},function(){cp_header_animating=!1,("0"==cp_is_mobile||"1"==cp_is_tablet)&&i.set_sidebar_height()})}},CommentPress.theme.DOM.init(),jQuery(document).ready(function(e){cp_book_header_height=e("#book_header").height(),("0"==cp_is_mobile||"1"==cp_is_tablet)&&e.set_sidebar_height(),e.cookie("cp_container_top_min")||(cp_container_top_max=e.px_to_num(e("#container").css("top")),cp_container_top_min=cp_container_top_max-cp_book_header_height,e.cookie("cp_container_top_min",cp_container_top_min.toString(),{expires:28,path:cp_cookie_path}),e.cookie("cp_container_top_max",cp_container_top_max.toString(),{expires:28,path:cp_cookie_path})),CommentPress.theme.header.init(),CommentPress.theme.navigation.init(),CommentPress.theme.content.init(),CommentPress.theme.sidebars.init(),CommentPress.theme.original.header.init(),CommentPress.theme.DOM.layout(),"1"==cp_special_page?e.on_load_scroll_to_comment():CommentPress.theme.viewport.on_load_scroll_to_anchor(),e(document).trigger("commentpress-document-ready")});