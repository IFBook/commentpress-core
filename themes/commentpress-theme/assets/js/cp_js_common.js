CommentPress.theme={};CommentPress.theme.settings=new function(){var a=this,b=jQuery.noConflict();this.init=function(){a.init_container_top_min();a.init_container_top_min()};this.dom_ready=function(){if(b.cookie("cp_container_top_min")){}else{a.set_container_top_max(b.px_to_num(b("#container").css("top")));a.save_container_top_max();a.set_container_top_min(a.get_container_top_max()-CommentPress.theme.original.header.get_height());a.save_container_top_min()}};this.container_top_min=false;this.init_container_top_max=function(){this.container_top_max=b.cookie("cp_container_top_max");if("undefined"===typeof this.container_top_max||this.container_top_max===null){this.container_top_max=108}if(CommentPress.settings.DOM.get_wp_adminbar()=="y"){this.container_top_max=parseInt(this.container_top_max)+CommentPress.settings.DOM.get_wp_adminbar_height()}};this.set_container_top_max=function(c){this.container_top_max=c};this.save_container_top_max=function(c){b.cookie("cp_container_top_max",a.get_container_top_max().toString(),{expires:28,path:cp_cookie_path})};this.get_container_top_max=function(){return this.container_top_max};this.container_top_min=false;this.init_container_top_min=function(){this.container_top_min=b.cookie("cp_container_top_min");if("undefined"===typeof this.container_top_min||this.container_top_min===null){this.container_top_min=108}if(CommentPress.settings.DOM.get_wp_adminbar()=="y"){this.container_top_min=parseInt(this.container_top_min)+CommentPress.settings.DOM.get_wp_adminbar_height()}};this.set_container_top_min=function(c){this.container_top_min=c};this.save_container_top_min=function(c){b.cookie("cp_container_top_min",a.get_container_top_min().toString(),{expires:28,path:cp_cookie_path})};this.get_container_top_min=function(){return this.container_top_min};this.toc_on_top="n";this.set_toc_on_top=function(c){this.toc_on_top=c};this.get_toc_on_top=function(){return this.toc_on_top}};CommentPress.theme.DOM=new function(){var a=this,b=jQuery.noConflict();this.init=function(){a.head()};this.dom_ready=function(){a.layout()};this.head=function(){var d,e,f,c;d="";if(document.getElementById){d+='<style type="text/css" media="screen">';if(cp_is_mobile=="0"){if(cp_textblock_meta=="0"){d+="#content .textblock span.para_marker, #content .textblock span.commenticonbox { display: none; } ";d+=".content .textblock span.para_marker, .content .textblock span.commenticonbox { display: none; } "}}d+="ul.all_comments_listing div.item_body { display: none; } ";if(CommentPress.settings.DOM.get_wp_adminbar()=="y"){d+="#header { top: "+CommentPress.settings.DOM.get_wp_adminbar_height()+"px; } ";d+="#book_header { top: "+(CommentPress.settings.DOM.get_wp_adminbar_height()+32)+"px; } ";if(CommentPress.settings.DOM.get_wp_adminbar_height()=="32"){d+="@media screen and ( max-width: 782px ) { #header { top: "+CommentPress.settings.DOM.get_wp_adminbar_expanded()+"px; }#book_header { top: "+(CommentPress.settings.DOM.get_wp_adminbar_expanded()+32)+"px; } } "}}if(cp_show_subpages=="0"){d+="#toc_sidebar .sidebar_contents_wrapper ul li ul { display: none; } "}if(CommentPress.theme.original.header.is_minimised()){e=CommentPress.theme.settings.get_container_top_max();if(CommentPress.settings.DOM.get_wp_adminbar()=="y"){e=CommentPress.theme.settings.get_container_top_max()-CommentPress.settings.DOM.get_wp_adminbar_height()}d+="#container { top: "+e+"px; } ";d+="#sidebar { top: "+CommentPress.theme.settings.get_container_top_max()+"px; } ";if(CommentPress.settings.DOM.get_wp_adminbar()=="y"){if(CommentPress.settings.DOM.get_wp_adminbar_height()=="32"){d+="@media screen and ( max-width: 782px ) { #sidebar { top: "+(e+CommentPress.settings.DOM.get_wp_adminbar_expanded())+"px; } } "}}}else{d+="#book_header { display: none; } ";e=CommentPress.theme.settings.get_container_top_min();if(CommentPress.settings.DOM.get_wp_adminbar()=="y"){e=CommentPress.theme.settings.get_container_top_min()-CommentPress.settings.DOM.get_wp_adminbar_height()}d+="#container { top: "+e+"px; } ";d+="#sidebar { top: "+CommentPress.theme.settings.get_container_top_min()+"px; } ";if(CommentPress.settings.DOM.get_wp_adminbar()=="y"){if(CommentPress.settings.DOM.get_wp_adminbar_height()=="32"){d+="@media screen and ( max-width: 782px ) { #sidebar { top: "+(e+CommentPress.settings.DOM.get_wp_adminbar_expanded())+"px; } } "}}}if(cp_special_page=="0"){d+=".paragraph_wrapper { display: none; } ";d+="#respond { display: none; } ";if(CommentPress.theme.sidebars.get_minimised()=="y"){d+="#comments_sidebar .sidebar_contents_wrapper { display: none; } "}}d+="#activity_sidebar .paragraph_wrapper { display: none; } ";if(b.cookie("cp_container_width")){f=b.cookie("cp_container_width");if(cp_is_signup_page=="1"){d+="#content { width: "+f+"%; } "}else{d+="#page_wrapper { width: "+f+"%; } "}d+="#footer { width: "+f+"%; } "}if(b.cookie("cp_book_nav_width")){c=b.cookie("cp_book_nav_width");d+="#book_nav div#cp_book_nav { width: "+c+"%; } "}if(b.cookie("cp_sidebar_width")){d+="#sidebar { width: "+b.cookie("cp_sidebar_width")+"%; } "}if(b.cookie("cp_sidebar_left")){d+="#sidebar { left: "+b.cookie("cp_sidebar_left")+"%; } "}d+="ul#sidebar_tabs, #toc_header.sidebar_header, body.blog_post #activity_header.sidebar_header { display: block; } ";if(cp_is_mobile=="1"&&cp_is_tablet=="0"){d+=".sidebar_contents_wrapper { height: auto; } "}d+="</style>"}document.write(d)};this.layout=function(){var c;if(cp_is_signup_page=="1"){c=b("#content")}else{c=b("#page_wrapper")}c.each(function(h){var r,l,d,p,m,e,k,g,o,q,f,j,n;r=b(this);l=b("#content");d=b("#sidebar");p=b("#footer");m=b("#book_header");e=b("#book_nav_wrapper");k=b("#cp_book_nav");g=b("#cp_book_info");o=r.width();q=d.width();n=d.offset().left-o;r.resizable({handles:"e",minWidth:cp_min_page_width,alsoResize:"#footer",start:function(i,s){o=r.width();q=d.width();f=k.width();j=d.css("left");n=d.offset().left-o},resize:function(i,s){var t;r.css("height","auto");p.css("height","auto");d.css("left",(r.width()+n)+"px");t=o-r.width();d.css("width",(q+t)+"px");k.css("width",(f-t)+"px")},stop:function(i,y){var x,s,v,t,z,u,w;x=parseFloat(b(window).width());s=r.width();v=parseFloat(Math.ceil((1000000*parseFloat(s)/x))/10000);r.css("width",v+"%");if(cp_is_signup_page=="0"){l.css("width","auto")}s=k.width();t=parseFloat(Math.ceil((1000000*parseFloat(s)/x))/10000);k.css("width",t+"%");s=d.width();z=parseFloat(Math.ceil((1000000*parseFloat(s)/x))/10000);d.css("width",z+"%");u=d.position().left;w=parseFloat(Math.ceil((1000000*parseFloat(u)/x))/10000);d.css("left",w+"%");b.cookie("cp_container_width",v.toString(),{expires:28,path:cp_cookie_path});b.cookie("cp_book_nav_width",t.toString(),{expires:28,path:cp_cookie_path});b.cookie("cp_sidebar_left",w.toString(),{expires:28,path:cp_cookie_path});b.cookie("cp_sidebar_width",z.toString(),{expires:28,path:cp_cookie_path})}})})}};CommentPress.theme.header=new function(){var a=this,b=jQuery.noConflict();this.init=function(){};this.dom_ready=function(){};this.get_offset=function(){var c;c=0-(b.px_to_num(b("#container").css("top")));if(CommentPress.settings.DOM.get_wp_adminbar()=="y"){c-=CommentPress.settings.DOM.get_wp_adminbar_height()}return c}};CommentPress.theme.navigation=new function(){var a=this,b=jQuery.noConflict();this.init=function(){};this.dom_ready=function(){a.menu()};this.menu=function(){b("#sidebar").on("click","#toc_header h2 a",function(c){c.preventDefault();CommentPress.theme.sidebars.activate_sidebar("toc")})}};CommentPress.theme.content=new function(){var a=this,b=jQuery.noConflict();this.init=function(){};this.dom_ready=function(){a.tabs()};this.tabs=function(){var d,c;d=b("#content").css("min-height");c=b("#content").css("padding-bottom");b("#literal .post").css("display","none");b("#original .post").css("display","none");CommentPress.common.content.workflow_tabs(d,c)}};CommentPress.theme.sidebars=new function(){var a=this,b=jQuery.noConflict();this.init=function(){a.init_minimised()};this.dom_ready=function(){if(cp_is_mobile=="0"||cp_is_tablet=="1"){a.set_height()}};this.minimised="n";this.init_minimised=function(){this.sidebar_minimised=b.cookie("cp_sidebar_minimised");if("undefined"===typeof this.sidebar_minimised||this.sidebar_minimised===null){this.sidebar_minimised="n"}};this.set_minimised=function(c){this.minimised=c};this.get_minimised=function(){return this.minimised};this.is_minimised=function(){if("undefined"===typeof this.minimised||this.minimised===null||this.minimised=="n"){return"n"}return this.minimised};this.toggle_minimised=function(){if(this.minimised==="y"){this.minimised="n"}else{this.minimised="y"}};this.activate_sidebar=function(f){var d,e,c;d=b("#"+f+"_sidebar").css("z-index");if(d=="2001"){b(".sidebar_container").css("z-index","2001");b("#"+f+"_sidebar").css("z-index","2010");e=a.get_top();c=a.get_top_border();b(".sidebar_header").css("height",(e-c)+"px");b("#"+f+"_header.sidebar_header").css("height",e+"px");CommentPress.theme.settings.set_toc_on_top("y")}if(cp_is_mobile=="0"||cp_is_tablet=="1"){a.set_height()}else{b(".sidebar_container").css("visibility","hidden");b("#"+f+"_sidebar").css("visibility","visible")}};this.get_top=function(){return b.px_to_num(b("#toc_sidebar").css("top"))};this.get_top_border=function(){return b.px_to_num(b(".sidebar_minimiser").css("borderTopWidth"))};this.get_sidebar_pane=function(){var c=a.get_sidebar_name();return b("#"+c+"_sidebar .sidebar_minimiser")};this.get_sidebar_name=function(){var c="toc";if(cp_default_sidebar=="comments"){c="comments";if(CommentPress.theme.settings.get_toc_on_top()=="y"){c="toc"}}if(cp_default_sidebar=="activity"){c="activity";if(CommentPress.theme.settings.get_toc_on_top()=="y"){c="toc"}}return c};this.get_element_adjust=function(g){var d,i,c,h,e,j,f;d=b.css_to_num(b.px_to_num(g.css("borderTopWidth")));i=b.css_to_num(b.px_to_num(g.css("borderBottomWidth")));c=b.css_to_num(b.px_to_num(g.css("padding-top")));h=b.css_to_num(b.px_to_num(g.css("padding-bottom")));e=b.css_to_num(b.px_to_num(g.css("margin-top")));j=b.css_to_num(b.px_to_num(g.css("margin-bottom")));f=d+i+c+h+e+j;return f};this.set_height=function(){var i,e,g,o,m,n,k,d,c,t,p,f,l,j,r,u,h,q,s;i=b("#sidebar");e=b("#sidebar_inner");g=b("#toc_sidebar");o=b("#"+CommentPress.theme.sidebars.get_sidebar_name()+"_sidebar .sidebar_header");m=a.get_sidebar_pane();n=i.offset().top;k=a.get_element_adjust(i);d=a.get_element_adjust(e);c=n+k+d;t=g.position().top;p=a.get_element_adjust(g);f=t+p;l=0;if(o.css("display")!="none"){l=o.height()+a.get_element_adjust(o)}j=a.get_element_adjust(m);if(cp_is_signup_page=="1"){r=b.css_to_num(b.px_to_num(b("#content").css("margin-bottom")))}else{r=b.css_to_num(b.px_to_num(b("#page_wrapper").css("margin-bottom")))}u=b(window).height();h=b(window).scrollTop();q=u+h;s=q-(c+f+l+j+r);b("#sidebar div.sidebar_contents_wrapper").css("height",s+"px");return s}};CommentPress.theme.viewport=new function(){var a=this,b=jQuery.noConflict();this.init=function(){};this.dom_ready=function(){};this.scroll_to_top=function(d,c){if("undefined"===typeof d){return}if(cp_is_mobile=="0"||cp_is_tablet=="1"){b.scrollTo(d,c)}};this.on_load_scroll_to_anchor=function(){var l,f,g,k,m,c,j,h,e,d,i;l="";f=document.location.toString();if(f.match("#comment-")){CommentPress.theme.sidebars.activate_sidebar("comments");g=f.split("#comment-")[1];k=b("#comment-"+g).parents("div.paragraph_wrapper").map(function(){return this});if(k.length>0){m=b(k[0]);if(cp_comments_open=="y"){l=m.prop("id").split("-")[1];c=b("#para_wrapper-"+l+" .reply_to_para").prop("id");j=c.split("-")[1];h=b("#comment_post_ID").prop("value");if(cp_tinymce=="1"){if(b("#comment-"+g+" > .reply").text()!==""){cp_tinymce="0";addComment.moveForm("comment-"+g,g,"respond",h,l);cp_tinymce="1"}}else{addComment.moveForm("comment-"+g,g,"respond",h,l)}}m.show();CommentPress.common.comments.scroll_comments(b("#comment-"+g),1,"flash");if(l!==""){e=b("#textblock-"+l);b.highlight_para(e);CommentPress.common.content.scroll_page(e)}else{if(!CommentPress.settings.page.get_highlight()){CommentPress.theme.viewport.scroll_to_top(0,cp_scroll_speed)}CommentPress.settings.page.toggle_highlight()}return}}else{b("span.para_marker > a").each(function(q){var r,o,n,p,s;r=b(this).prop("id");if(f.match("#"+r)||f.match("#para_heading-"+r)){if(cp_comments_open=="y"){o=b("#para_wrapper-"+r+" .reply_to_para").prop("id");n=o.split("-")[1];p=b("#comment_post_ID").prop("value");addComment.moveFormToPara(n,r,p)}b("#para_heading-"+r).next("div.paragraph_wrapper").show();CommentPress.common.comments.scroll_comments(b("#para_heading-"+r),1);s=b("#textblock-"+r);b.highlight_para(s);CommentPress.common.content.scroll_page(s);return}})}if(f.match("#respond")){b("h3#para_heading- a.comment_block_permalink").click();return}if(f.match("#")){d=f.split("#")[1];if(d=="edit=true"){return}if(d=="fee-edit-link"){return}i=b("#"+d);if(i.length){i.addClass("selected_para");CommentPress.common.content.scroll_page(i)}return}};this.align_content=function(n,m){if(m=="none"){return}CommentPress.theme.sidebars.activate_sidebar("comments");var k,d,f,j,g,i,e,h,c,l;k=b("#para_heading-"+n).next("div.paragraph_wrapper");if(k.length==0){return}d=b("#para_wrapper-"+n+" .commentlist");f=k.find("#respond");j=addComment.getLevel();g=false;i=k.css("display");if(i=="none"){g=true}b.unhighlight_para();if(n!==""){e=b("#textblock-"+n);if(cp_promote_reading=="1"&&!g){}else{b.highlight_para(e);CommentPress.common.content.scroll_page(e)}}if(cp_promote_reading=="0"){if(cp_comments_open=="y"){h=b("#comment_post_ID").prop("value");c=b("#para_wrapper-"+n+" .reply_to_para").prop("id");l=c.split("-")[1]}if(!f[0]){if(cp_comments_open=="y"){addComment.moveFormToPara(l,n,h)}}if(f[0]&&!j){if(cp_comments_open=="y"){addComment.moveFormToPara(l,n,h);if(m=="para_heading"){CommentPress.common.comments.scroll_comments(b("#para_heading-"+n),cp_scroll_speed)}else{CommentPress.common.comments.scroll_comments(b("#respond"),cp_scroll_speed)}}else{CommentPress.common.comments.scroll_comments(b("#para_heading-"+n),cp_scroll_speed)}return}if(!f[0]&&d[0]&&!g){if(cp_comments_open=="y"){if(m=="para_heading"){CommentPress.common.comments.scroll_comments(b("#para_heading-"+n),cp_scroll_speed)}else{CommentPress.common.comments.scroll_comments(b("#respond"),cp_scroll_speed)}}else{CommentPress.common.comments.scroll_comments(b("#para_heading-"+n),cp_scroll_speed)}return}if(!g&&d[0]){if(cp_comments_open=="y"){if(m=="para_heading"){CommentPress.common.comments.scroll_comments(b("#para_heading-"+n),cp_scroll_speed)}else{CommentPress.common.comments.scroll_comments(b("#respond"),cp_scroll_speed)}}else{CommentPress.common.comments.scroll_comments(b("#para_heading-"+n),cp_scroll_speed)}return}if(f[0]&&!d[0]&&!g){if(cp_comments_open=="y"){if(m=="para_heading"){CommentPress.common.comments.scroll_comments(b("#para_heading-"+n),cp_scroll_speed)}else{CommentPress.common.comments.scroll_comments(b("#respond"),cp_scroll_speed)}}else{CommentPress.common.comments.scroll_comments(b("#para_heading-"+n),cp_scroll_speed)}return}if(!g&&!d[0]){k.css("display","none");g=true}}k.slideToggle("slow",function(){if(cp_promote_reading=="1"&&g){CommentPress.common.comments.scroll_comments(b("#para_heading-"+n),cp_scroll_speed)}else{if(g){if(cp_comments_open=="y"){if(m=="para_heading"){CommentPress.common.comments.scroll_comments(b("#para_heading-"+n),cp_scroll_speed)}else{CommentPress.common.comments.scroll_comments(b("#respond"),cp_scroll_speed)}}else{CommentPress.common.comments.scroll_comments(b("#para_heading-"+n),cp_scroll_speed)}}}})}};CommentPress.theme.original={};CommentPress.theme.original.header=new function(){var b=this,c=jQuery.noConflict(),a=false;this.init=function(){b.init_minimised()};this.dom_ready=function(){b.init_height();b.minimiser()};this.header_height=0;this.init_height=function(){this.header_height=c("#book_header").height()};this.set_height=function(d){this.header_height=d};this.get_height=function(){return this.header_height};this.minimised="n";this.init_minimised=function(){this.minimised=c.cookie("cp_header_minimised");if("undefined"===typeof this.minimised||this.minimised===null){this.minimised="n"}};this.set_minimised=function(d){this.minimised=d};this.get_minimised=function(){return this.minimised};this.is_minimised=function(){if("undefined"===typeof this.minimised||this.minimised===null||this.minimised=="n"){return"n"}return this.minimised};this.toggle_minimised=function(){if(this.minimised==="y"){this.minimised="n"}else{this.minimised="y"}};this.minimiser=function(){c("#header").on("click","#btn_header_min",function(d){d.preventDefault();b.toggle()})};this.toggle=function(){if(a===true){return false}a=true;if(b.is_minimised()){b.close()}else{b.open()}b.toggle_minimised();c.cookie("cp_header_minimised",b.get_minimised(),{expires:28,path:cp_cookie_path})};this.open=function(){var e,d,g,i,f,j,h;e=c("#book_nav").height();d=c("#sidebar");g=CommentPress.theme.sidebars.get_sidebar_pane();i=c("#book_header");f=c("#container");j=CommentPress.theme.settings.get_container_top_max();if(CommentPress.settings.DOM.get_wp_adminbar()=="y"){j=CommentPress.theme.settings.get_container_top_max()-CommentPress.settings.DOM.get_wp_adminbar_height()}f.animate({top:j+"px",duration:"fast"},function(){i.fadeIn("fast",function(){a=false})});if(CommentPress.theme.sidebars.get_minimised()=="n"){h=d.height()-b.get_height();d.animate({top:CommentPress.theme.settings.get_container_top_max()+"px",height:h+"px",duration:"fast"},function(){d.css("height","auto")});g.animate({height:(g.height()-b.get_height())+"px",duration:"fast"},function(){if(cp_is_mobile=="0"||cp_is_tablet=="1"){CommentPress.theme.sidebars.set_height()}a=false})}else{d.animate({top:CommentPress.theme.settings.get_container_top_max()+"px",duration:"fast"},function(){a=false;if(cp_is_mobile=="0"||cp_is_tablet=="1"){CommentPress.theme.sidebars.set_height()}})}};this.close=function(){var e,d,g,i,f;var j,h;e=c("#book_nav").height();d=c("#sidebar");g=CommentPress.theme.sidebars.get_sidebar_pane();i=c("#book_header");f=c("#container");i.hide();j=CommentPress.theme.settings.get_container_top_min();if(CommentPress.settings.DOM.get_wp_adminbar()=="y"){j=CommentPress.theme.settings.get_container_top_min()-CommentPress.settings.DOM.get_wp_adminbar_height()}f.animate({top:j+"px",duration:"fast"});if(CommentPress.theme.sidebars.get_minimised()=="n"){h=d.height()+b.get_height();d.animate({top:CommentPress.theme.settings.get_container_top_min()+"px",height:h+"px",duration:"fast"},function(){d.css("height","auto")});g.animate({height:(g.height()+b.get_height())+"px",duration:"fast"},function(){if(cp_is_mobile=="0"||cp_is_tablet=="1"){CommentPress.theme.sidebars.set_height()}a=false})}else{d.animate({top:CommentPress.theme.settings.get_container_top_min()+"px",duration:"fast"},function(){a=false;if(cp_is_mobile=="0"||cp_is_tablet=="1"){CommentPress.theme.sidebars.set_height()}})}}};CommentPress.theme.settings.init();CommentPress.theme.DOM.init();CommentPress.theme.header.init();CommentPress.theme.navigation.init();CommentPress.theme.content.init();CommentPress.theme.sidebars.init();CommentPress.theme.viewport.init();CommentPress.theme.original.header.init();jQuery(document).ready(function(a){CommentPress.theme.settings.dom_ready();CommentPress.theme.DOM.dom_ready();CommentPress.theme.header.dom_ready();CommentPress.theme.navigation.dom_ready();CommentPress.theme.content.dom_ready();CommentPress.theme.sidebars.dom_ready();CommentPress.theme.viewport.dom_ready();CommentPress.theme.original.header.dom_ready();if(cp_special_page=="1"){CommentPress.common.content.on_load_scroll_to_comment()}else{CommentPress.theme.viewport.on_load_scroll_to_anchor()}a(document).trigger("commentpress-document-ready")});