var cp_book_header_height,cp_header_animating,cp_toc_on_top,page_highlight,cp_header_minimised,cp_sidebar_minimised,cp_container_top_max,cp_container_top_min;cp_header_animating=false;cp_toc_on_top="n";page_highlight=false;cp_header_minimised=jQuery.cookie("cp_header_minimised");if(cp_header_minimised===undefined||cp_header_minimised===null){cp_header_minimised="n"}cp_sidebar_minimised=jQuery.cookie("cp_sidebar_minimised");if(cp_sidebar_minimised===undefined||cp_sidebar_minimised===null){cp_sidebar_minimised="n"}cp_container_top_max=jQuery.cookie("cp_container_top_max");if(cp_container_top_max===undefined||cp_container_top_max===null){cp_container_top_max=108}cp_container_top_min=jQuery.cookie("cp_container_top_min");if(cp_container_top_min===undefined||cp_container_top_min===null){cp_container_top_min=108}if(cp_bp_adminbar=="y"){cp_wp_adminbar_height=25;cp_wp_adminbar="y"}if(cp_wp_adminbar=="y"){cp_container_top_max=parseInt(cp_container_top_max)+cp_wp_adminbar_height;cp_container_top_min=parseInt(cp_container_top_min)+cp_wp_adminbar_height}CommentPress.theme={};CommentPress.theme.DOM=new function(){var a=this;this.init=function(){a.head()};this.head=function(){var c,d,e,b;c="";if(document.getElementById){c+='<style type="text/css" media="screen">';if(cp_is_mobile=="0"){if(cp_textblock_meta=="0"){c+="#content .textblock span.para_marker, #content .textblock span.commenticonbox { display: none; } ";c+=".content .textblock span.para_marker, .content .textblock span.commenticonbox { display: none; } "}}c+="ul.all_comments_listing div.item_body { display: none; } ";if(cp_wp_adminbar=="y"){c+="#header { top: "+cp_wp_adminbar_height+"px; } ";c+="#book_header { top: "+(cp_wp_adminbar_height+32)+"px; } ";if(cp_wp_adminbar_height=="32"){c+="@media screen and ( max-width: 782px ) { #header { top: "+cp_wp_adminbar_expanded+"px; }#book_header { top: "+(cp_wp_adminbar_expanded+32)+"px; } } "}}if(cp_show_subpages=="0"){c+="#toc_sidebar .sidebar_contents_wrapper ul li ul { display: none; } "}if(cp_header_minimised===undefined||cp_header_minimised===null||cp_header_minimised=="n"){d=cp_container_top_max;if(cp_wp_adminbar=="y"){d=cp_container_top_max-cp_wp_adminbar_height}c+="#container { top: "+d+"px; } ";c+="#sidebar { top: "+cp_container_top_max+"px; } ";if(cp_wp_adminbar=="y"){if(cp_wp_adminbar_height=="32"){c+="@media screen and ( max-width: 782px ) { #sidebar { top: "+(d+cp_wp_adminbar_expanded)+"px; } } "}}}else{c+="#book_header { display: none; } ";d=cp_container_top_min;if(cp_wp_adminbar=="y"){d=cp_container_top_min-cp_wp_adminbar_height}c+="#container { top: "+d+"px; } ";c+="#sidebar { top: "+cp_container_top_min+"px; } ";if(cp_wp_adminbar=="y"){if(cp_wp_adminbar_height=="32"){c+="@media screen and ( max-width: 782px ) { #sidebar { top: "+(d+cp_wp_adminbar_expanded)+"px; } } "}}}if(cp_special_page=="0"){c+=".paragraph_wrapper { display: none; } ";c+="#respond { display: none; } ";if(cp_sidebar_minimised=="y"){c+="#comments_sidebar .sidebar_contents_wrapper { display: none; } "}}c+="#activity_sidebar .paragraph_wrapper { display: none; } ";if(jQuery.cookie("cp_container_width")){e=jQuery.cookie("cp_container_width");if(cp_is_signup_page=="1"){c+="#content { width: "+e+"%; } "}else{c+="#page_wrapper { width: "+e+"%; } "}c+="#footer { width: "+e+"%; } "}if(jQuery.cookie("cp_book_nav_width")){b=jQuery.cookie("cp_book_nav_width");c+="#book_nav div#cp_book_nav { width: "+b+"%; } "}if(jQuery.cookie("cp_sidebar_width")){c+="#sidebar { width: "+jQuery.cookie("cp_sidebar_width")+"%; } "}if(jQuery.cookie("cp_sidebar_left")){c+="#sidebar { left: "+jQuery.cookie("cp_sidebar_left")+"%; } "}c+="ul#sidebar_tabs, #toc_header.sidebar_header, body.blog_post #activity_header.sidebar_header { display: block; } ";if(cp_is_mobile=="1"&&cp_is_tablet=="0"){c+=".sidebar_contents_wrapper { height: auto; } "}c+="</style>"}document.write(c)};this.layout=function(){var b;if(cp_is_signup_page=="1"){b=jQuery("#content")}else{b=jQuery("#page_wrapper")}b.each(function(g){var q,k,c,o,l,d,j,f,n,p,e,h,m;q=jQuery(this);k=jQuery("#content");c=jQuery("#sidebar");o=jQuery("#footer");l=jQuery("#book_header");d=jQuery("#book_nav_wrapper");j=jQuery("#cp_book_nav");f=jQuery("#cp_book_info");n=q.width();p=c.width();m=c.offset().left-n;q.resizable({handles:"e",minWidth:cp_min_page_width,alsoResize:"#footer",start:function(i,r){n=q.width();p=c.width();e=j.width();h=c.css("left");m=c.offset().left-n},resize:function(i,r){var s;q.css("height","auto");o.css("height","auto");c.css("left",(q.width()+m)+"px");s=n-q.width();c.css("width",(p+s)+"px");j.css("width",(e-s)+"px")},stop:function(i,x){var w,r,u,s,y,t,v;w=parseFloat(jQuery(window).width());r=q.width();if(jQuery.browser.webkit){r=r+1}u=parseFloat(Math.ceil((1000000*parseFloat(r)/w))/10000);q.css("width",u+"%");if(cp_is_signup_page=="0"){k.css("width","auto")}r=j.width();if(jQuery.browser.webkit){r=r+1}s=parseFloat(Math.ceil((1000000*parseFloat(r)/w))/10000);j.css("width",s+"%");r=c.width();if(jQuery.browser.webkit){r=r+1}y=parseFloat(Math.ceil((1000000*parseFloat(r)/w))/10000);c.css("width",y+"%");t=c.position().left;if(jQuery.browser.webkit){t=t+1}v=parseFloat(Math.ceil((1000000*parseFloat(t)/w))/10000);c.css("left",v+"%");jQuery.cookie("cp_container_width",u.toString(),{expires:28,path:cp_cookie_path});jQuery.cookie("cp_book_nav_width",s.toString(),{expires:28,path:cp_cookie_path});jQuery.cookie("cp_sidebar_left",v.toString(),{expires:28,path:cp_cookie_path});jQuery.cookie("cp_sidebar_width",y.toString(),{expires:28,path:cp_cookie_path})}})})}};CommentPress.theme.header=new function(){var a=this;this.init=function(){};this.get_offset=function(){var b;b=0-(jQuery.px_to_num(jQuery("#container").css("top")));if(cp_wp_adminbar=="y"){b-=cp_wp_adminbar_height}return b}};CommentPress.theme.navigation=new function(){var a=this;this.init=function(){a.menu()};this.menu=function(){jQuery("#sidebar").on("click","#toc_header h2 a",function(b){b.preventDefault();CommentPress.theme.sidebars.activate_sidebar("toc")})}};CommentPress.theme.content=new function(){var a=this;this.init=function(){a.tabs()};this.tabs=function(){var c,b;c=jQuery("#content").css("min-height");b=jQuery("#content").css("padding-bottom");jQuery("#literal .post").css("display","none");jQuery("#original .post").css("display","none");CommentPress.setup.content.workflow_tabs(c,b)}};CommentPress.theme.sidebars=new function(){var a=this;this.init=function(){};this.activate_sidebar=function(e){var c,d,b;c=jQuery("#"+e+"_sidebar").css("z-index");if(c=="2001"){jQuery(".sidebar_container").css("z-index","2001");jQuery("#"+e+"_sidebar").css("z-index","2010");d=a.get_top();b=a.get_top_border();jQuery(".sidebar_header").css("height",(d-b)+"px");jQuery("#"+e+"_header.sidebar_header").css("height",d+"px");cp_toc_on_top="y"}if(cp_is_mobile=="0"||cp_is_tablet=="1"){jQuery.set_sidebar_height()}else{jQuery(".sidebar_container").css("visibility","hidden");jQuery("#"+e+"_sidebar").css("visibility","visible")}};this.get_top=function(){return jQuery.px_to_num(jQuery("#toc_sidebar").css("top"))};this.get_top_border=function(){return jQuery.px_to_num(jQuery(".sidebar_minimiser").css("borderTopWidth"))}};CommentPress.theme.viewport=new function(){var a=this;this.init=function(){};this.scroll_to_top=function(c,b){if(typeof c==="undefined"){return}if(cp_is_mobile=="0"||cp_is_tablet=="1"){jQuery.scrollTo(c,b)}};this.on_load_scroll_to_anchor=function(){var k,e,f,j,l,b,i,g,d,c,h;k="";e=document.location.toString();if(e.match("#comment-")){CommentPress.theme.sidebars.activate_sidebar("comments");f=e.split("#comment-")[1];j=jQuery("#comment-"+f).parents("div.paragraph_wrapper").map(function(){return this});if(j.length>0){l=jQuery(j[0]);if(cp_comments_open=="y"){k=l.prop("id").split("-")[1];b=jQuery("#para_wrapper-"+k+" .reply_to_para").prop("id");i=b.split("-")[1];g=jQuery("#comment_post_ID").prop("value");if(cp_tinymce=="1"){if(jQuery("#comment-"+f+" > .reply").text()!==""){cp_tinymce="0";addComment.moveForm("comment-"+f,f,"respond",g,k);cp_tinymce="1"}}else{addComment.moveForm("comment-"+f,f,"respond",g,k)}}l.show();jQuery.scroll_comments(jQuery("#comment-"+f),1,"flash");if(k!==""){d=jQuery("#textblock-"+k);jQuery.highlight_para(d);jQuery.scroll_page(d)}else{if(page_highlight===false){CommentPress.theme.viewport.scroll_to_top(0,cp_scroll_speed)}page_highlight=!page_highlight}return}}else{jQuery("span.para_marker > a").each(function(p){var q,n,m,o,r;q=jQuery(this).prop("id");if(e.match("#"+q)||e.match("#para_heading-"+q)){if(cp_comments_open=="y"){n=jQuery("#para_wrapper-"+q+" .reply_to_para").prop("id");m=n.split("-")[1];o=jQuery("#comment_post_ID").prop("value");addComment.moveFormToPara(m,q,o)}jQuery("#para_heading-"+q).next("div.paragraph_wrapper").show();jQuery.scroll_comments(jQuery("#para_heading-"+q),1);r=jQuery("#textblock-"+q);jQuery.highlight_para(r);jQuery.scroll_page(r);return}})}if(e.match("#respond")){jQuery("h3#para_heading- a.comment_block_permalink").click();return}if(e.match("#")){c=e.split("#")[1];if(c=="edit=true"){return}if(c=="fee-edit-link"){return}h=jQuery("#"+c);if(h.length){h.addClass("selected_para");jQuery.scroll_page(h)}return}};this.align_content=function(m,j){CommentPress.theme.sidebars.activate_sidebar("comments");var k,c,e,i,f,h,d,g,b,l;k=jQuery("#para_heading-"+m).next("div.paragraph_wrapper");if(k.length==0){return}c=jQuery("#para_wrapper-"+m+" .commentlist");e=k.find("#respond");i=addComment.getLevel();f=false;h=k.css("display");if(h=="none"){f=true}jQuery.unhighlight_para();if(m!==""){d=jQuery("#textblock-"+m);if(cp_promote_reading=="1"&&!f){}else{jQuery.highlight_para(d);jQuery.scroll_page(d)}}if(cp_promote_reading=="0"){if(cp_comments_open=="y"){g=jQuery("#comment_post_ID").prop("value");b=jQuery("#para_wrapper-"+m+" .reply_to_para").prop("id");l=b.split("-")[1]}if(!e[0]){if(cp_comments_open=="y"){addComment.moveFormToPara(l,m,g)}}if(e[0]&&!i){if(cp_comments_open=="y"){addComment.moveFormToPara(l,m,g);if(j=="marker"){jQuery.scroll_comments(jQuery("#para_heading-"+m),cp_scroll_speed)}else{jQuery.scroll_comments(jQuery("#respond"),cp_scroll_speed)}}else{jQuery.scroll_comments(jQuery("#para_heading-"+m),cp_scroll_speed)}return}if(!e[0]&&c[0]&&!f){if(cp_comments_open=="y"){if(j=="marker"){jQuery.scroll_comments(jQuery("#para_heading-"+m),cp_scroll_speed)}else{jQuery.scroll_comments(jQuery("#respond"),cp_scroll_speed)}}else{jQuery.scroll_comments(jQuery("#para_heading-"+m),cp_scroll_speed)}return}if(!f&&c[0]){if(cp_comments_open=="y"){if(j=="marker"){jQuery.scroll_comments(jQuery("#para_heading-"+m),cp_scroll_speed)}else{jQuery.scroll_comments(jQuery("#respond"),cp_scroll_speed)}}else{jQuery.scroll_comments(jQuery("#para_heading-"+m),cp_scroll_speed)}return}if(e[0]&&!c[0]&&!f){if(cp_comments_open=="y"){if(j=="marker"){jQuery.scroll_comments(jQuery("#para_heading-"+m),cp_scroll_speed)}else{jQuery.scroll_comments(jQuery("#respond"),cp_scroll_speed)}}else{jQuery.scroll_comments(jQuery("#para_heading-"+m),cp_scroll_speed)}return}if(!f&&!c[0]){k.css("display","none");f=true}}k.slideToggle("slow",function(){if(cp_promote_reading=="1"&&f){jQuery.scroll_comments(jQuery("#para_heading-"+m),cp_scroll_speed)}else{if(f){if(cp_comments_open=="y"){if(j=="marker"){jQuery.scroll_comments(jQuery("#para_heading-"+m),cp_scroll_speed)}else{jQuery.scroll_comments(jQuery("#respond"),cp_scroll_speed)}}else{jQuery.scroll_comments(jQuery("#para_heading-"+m),cp_scroll_speed)}}}})}};CommentPress.theme.original={};CommentPress.theme.original.header=new function(){var a=this;this.init=function(){a.minimiser()};this.minimiser=function(){jQuery("#header").on("click","#btn_header_min",function(b){b.preventDefault();a.toggle()})};this.toggle=function(){if(cp_header_animating===true){return false}cp_header_animating=true;if(cp_header_minimised===undefined||cp_header_minimised===null||cp_header_minimised=="n"){a.close()}else{a.open()}cp_header_minimised=(cp_header_minimised=="y")?"n":"y";jQuery.cookie("cp_header_minimised",cp_header_minimised,{expires:28,path:cp_cookie_path})};this.open=function(){var c,b,e,g,d,h,f;c=jQuery("#book_nav").height();b=jQuery("#sidebar");e=jQuery.get_sidebar_pane();g=jQuery("#book_header");d=jQuery("#container");h=cp_container_top_max;if(cp_wp_adminbar=="y"){h=cp_container_top_max-cp_wp_adminbar_height}d.animate({top:h+"px",duration:"fast"},function(){g.fadeIn("fast",function(){cp_header_animating=false})});if(cp_sidebar_minimised=="n"){f=b.height()-cp_book_header_height;b.animate({top:cp_container_top_max+"px",height:f+"px",duration:"fast"},function(){b.css("height","auto")});e.animate({height:(e.height()-cp_book_header_height)+"px",duration:"fast"},function(){if(cp_is_mobile=="0"||cp_is_tablet=="1"){jQuery.set_sidebar_height()}cp_header_animating=false})}else{b.animate({top:cp_container_top_max+"px",duration:"fast"},function(){cp_header_animating=false;if(cp_is_mobile=="0"||cp_is_tablet=="1"){jQuery.set_sidebar_height()}})}};this.close=function(){var c,b,e,g,d;var h,f;c=jQuery("#book_nav").height();b=jQuery("#sidebar");e=jQuery.get_sidebar_pane();g=jQuery("#book_header");d=jQuery("#container");g.hide();h=cp_container_top_min;if(cp_wp_adminbar=="y"){h=cp_container_top_min-cp_wp_adminbar_height}d.animate({top:h+"px",duration:"fast"});if(cp_sidebar_minimised=="n"){f=b.height()+cp_book_header_height;b.animate({top:cp_container_top_min+"px",height:f+"px",duration:"fast"},function(){b.css("height","auto")});e.animate({height:(e.height()+cp_book_header_height)+"px",duration:"fast"},function(){if(cp_is_mobile=="0"||cp_is_tablet=="1"){jQuery.set_sidebar_height()}cp_header_animating=false})}else{b.animate({top:cp_container_top_min+"px",duration:"fast"},function(){cp_header_animating=false;if(cp_is_mobile=="0"||cp_is_tablet=="1"){jQuery.set_sidebar_height()}})}}};CommentPress.theme.DOM.init();jQuery(document).ready(function(a){cp_book_header_height=a("#book_header").height();if(cp_is_mobile=="0"||cp_is_tablet=="1"){a.set_sidebar_height()}if(jQuery.cookie("cp_container_top_min")){}else{cp_container_top_max=a.px_to_num(a("#container").css("top"));cp_container_top_min=cp_container_top_max-cp_book_header_height;a.cookie("cp_container_top_min",cp_container_top_min.toString(),{expires:28,path:cp_cookie_path});a.cookie("cp_container_top_max",cp_container_top_max.toString(),{expires:28,path:cp_cookie_path})}CommentPress.theme.header.init();CommentPress.theme.navigation.init();CommentPress.theme.content.init();CommentPress.theme.sidebars.init();CommentPress.theme.original.header.init();CommentPress.theme.DOM.layout();if(cp_special_page=="1"){a.on_load_scroll_to_comment()}else{CommentPress.theme.viewport.on_load_scroll_to_anchor()}a(document).trigger("commentpress-document-ready")});