addComment={moveForm:function(e,t,n,r,m){this.disableForm();var o,a=this.I(e),i=this.I(n),d=this.I("cancel-comment-reply-link"),p=this.I("comment_parent"),s=this.I("comment_post_ID");if(this.I("text_signature"))var c=this.I("text_signature");else var c="";if(!(a&&i&&d&&p))return void this.enableForm();addComment.commentEditResetForm(),s&&r&&(s.value=r),p.value=t,""!==c&&(c.value=m),this.respondID=n,addComment.setTitle(t,m,"set"),this.I("wp-temp-form-div")||(o=document.createElement("div"),o.id="wp-temp-form-div",o.style.display="none",i.parentNode.insertBefore(o,i)),a.parentNode.insertBefore(i,a.nextSibling),"1"!=cp_special_page&&"0"==cp_promote_reading&&"0"==t?d.style.display="none":d.style.display="",d.onclick=function(){return addComment.cancelForm()},"1"==cp_tinymce&&this.enableForm(),i.style.display="block",addComment.clearCommentHighlight(this.parentID),addComment.highlightComment(t),this.text_signature=m,this.parentID=t;var l=[e,t,n,r,m];return jQuery(document).trigger("commentpress-commentform-moved",["add",l]),!1},moveFormToPara:function(e,t,n){var r="reply_to_para-"+e;return addComment.moveForm(r,"0","respond",n,t),!1},moveFormToEdit:function(e,t,n,r,m,o,a){this.disableForm();var i,d=this.I(e),p=this.I(n),s=this.I("cancel-comment-reply-link"),c=this.I("comment_parent"),l=this.I("comment_post_ID");if(this.I("text_signature"))var u=this.I("text_signature");else var u="";if(!(d&&p&&s&&c))return void this.enableForm();addComment.commentEditResetForm(),this.commentEditMode="y";var _='<input type="hidden" name="cp_edit_comment" id="cp_edit_comment" value="y" />';jQuery(_).appendTo("#commentform");var y=e.split("-")[1],v='<input type="hidden" name="comment_ID" id="comment_ID" value="'+y+'" />';jQuery(v).appendTo("#commentform");var a='<input type="hidden" name="cpajax_comment_nonce" id="cpajax_comment_nonce" value="'+a+'" />';jQuery(a).appendTo("#commentform"),l&&r&&(l.value=r),c.value=t,""!==u&&(u.value=m),this.respondID=n,addComment.previousTitle=jQuery("#respond_title").text(),jQuery("#respond_title").text(CommentPress_Form.localisation.edit_title),jQuery(".comment-content").css("display","block"),jQuery("#"+e+" .comment-content").hide(),this.previousSubmit=jQuery("#submit").attr("value"),jQuery("#submit").attr("value",CommentPress_Form.localisation.submit),jQuery("#comment").val(o),this.I("wp-temp-form-div")||(i=document.createElement("div"),i.id="wp-temp-form-div",i.style.display="none",p.parentNode.insertBefore(i,p)),d.parentNode.insertBefore(p,d.nextSibling),"1"!=cp_special_page&&"0"==cp_promote_reading&&"0"==t?s.style.display="none":s.style.display="",s.onclick=function(){return addComment.disableForm(),addComment.commentEditResetForm(),addComment.cancelForm()},"1"==cp_tinymce&&this.enableForm(),p.style.display="block",addComment.clearCommentHighlight(this.parentID),addComment.highlightComment(t),this.text_signature=m,this.parentID=t;var h=[e,t,n,r,m,o];return jQuery(document).trigger("commentpress-commentform-moved",["edit",h]),!1},commentEditResetForm:function(){this.commentEditMode="n",jQuery(".comment-content").css("display","block"),jQuery("#comment").val(""),jQuery("#submit").attr("value",this.previousSubmit),"undefined"!=typeof addComment.previousTitle&&""!=addComment.previousTitle&&jQuery("#respond_title").text(addComment.previousTitle),jQuery("#cp_edit_comment").remove(),jQuery("#comment_ID").remove(),jQuery("#cpajax_comment_nonce").remove()},cancelForm:function(){var e=addComment.I("wp-temp-form-div"),t=addComment.I(addComment.respondID),n=this.I("cancel-comment-reply-link");if(e&&t){if(addComment.clearCommentHighlight(this.parentID),"1"!=cp_special_page){var r="",m="";if(addComment.I("text_signature")){r=addComment.I("text_signature").value,addComment.I("text_signature").value="";var o=jQuery("#para_wrapper-"+r+" .reply_to_para").attr("id");if("undefined"==typeof o){var a=jQuery("#respond").closest("div.paragraph_wrapper");if(a.length>0)var i=a.attr("id"),o=jQuery("#"+i+" .reply_to_para").attr("id")}m=o.split("-")[1]}if("1"!=cp_promote_reading){var d=addComment.I("comment_post_ID").value;return addComment.moveFormToPara(m,r,d),!1}"none"!=t.style.display&&(t.style.display="none")}addComment.disableForm();addComment.I("comment_parent").value;addComment.I("comment_parent").value="0",e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e),n.style.display="none",n.onclick=null,addComment.setTitle("0",r,"cancel"),this.text_signature="",jQuery("#comment").val(""),addComment.enableForm();var p=[];return jQuery(document).trigger("commentpress-commentform-moved",["cancel",p]),!1}},I:function(e){return document.getElementById(e)},enableForm:function(){"1"==cp_tinymce&&("3"==cp_tinymce_version?setTimeout(function(){tinyMCE.execCommand("mceAddControl",!1,"comment"),tinyMCE.execCommand("render")},1):setTimeout(function(){tinyMCE.execCommand("mceAddEditor",!1,"comment"),tinyMCE.execCommand("render")},1))},disableForm:function(){"1"==cp_tinymce&&("3"==cp_tinymce_version?tinyMCE.execCommand("mceRemoveControl",!1,"comment"):tinyMCE.execCommand("mceRemoveEditor",!1,"comment"))},setTitle:function(e,t,n){var r=addComment.I("respond_title");if("undefined"==typeof e||"0"==e)if("undefined"==typeof t||""==t)if("1"==cp_special_page)r.innerHTML=CommentPress_Form.localisation.title;else{r.innerHTML=jQuery("#para_wrapper-"+t+" a.reply_to_para").text();var m=jQuery("#para_wrapper-"+addComment.text_signature+" .commentlist");m[0]&&"0"==cp_promote_reading&&jQuery("#para_wrapper-"+addComment.text_signature+" div.reply_to_para").show(),"cancel"==n&&"1"==cp_promote_reading?jQuery("div.reply_to_para").show():jQuery("#para_wrapper-"+t+" div.reply_to_para").hide()}else{var o=jQuery("#para_wrapper-"+t+" a.reply_to_para");r.innerHTML=o.text();var m=jQuery("#para_wrapper-"+addComment.text_signature+" .commentlist");(m[0]&&"0"==cp_promote_reading||"1"==cp_promote_reading)&&"undefined"!=typeof addComment.text_signature&&jQuery("#para_wrapper-"+addComment.text_signature+" div.reply_to_para").show(),"0"==cp_promote_reading?jQuery("#para_wrapper-"+t+" div.reply_to_para").hide():"cancel"==n?jQuery("div.reply_to_para").show():jQuery("#para_wrapper-"+t+" div.reply_to_para").toggle()}else{var a=jQuery("#comment-"+e+" > .reply")[0],i=jQuery(a).text();""!=i&&(r.innerHTML=i,"1"==cp_promote_reading&&("undefined"!=typeof addComment.text_signature&&jQuery("#para_wrapper-"+addComment.text_signature+" div.reply_to_para").show(),jQuery("#para_wrapper-"+t+" div.reply_to_para").show()))}},highlightComment:function(e){"0"!=e&&jQuery("#comment-"+e+" > .reply").css("display","none"),jQuery(document).trigger("commentpress-comment-highlight",[e])},clearCommentHighlight:function(e){"0"!=e&&jQuery("#comment-"+e+" > .reply").css("display","block"),jQuery(document).trigger("commentpress-comment-unhighlight",[e])},clearAllCommentHighlights:function(){jQuery(".reply").css("display","block"),jQuery(document).trigger("commentpress-comment-highlights-clear")},getTextSig:function(){return this.text_signature},getLevel:function(){return"undefined"==typeof this.parentID||"0"===this.parentID}};
