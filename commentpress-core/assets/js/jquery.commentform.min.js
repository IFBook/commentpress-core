addComment={moveForm:function(e,t,n,m,o){this.disableForm();var r,a=this.I(e),i=this.I(n),d=this.I("cancel-comment-reply-link"),p=this.I("comment_parent"),s=this.I("comment_post_ID");if(this.I("text_signature"))var c=this.I("text_signature");else var c="";if(!(a&&i&&d&&p))return void this.enableForm();addComment.commentEditResetForm(),s&&m&&(s.value=m),p.value=t,""!==c&&(c.value=o),this.respondID=n,addComment.setTitle(t,o,"set"),this.I("wp-temp-form-div")||(r=document.createElement("div"),r.id="wp-temp-form-div",r.style.display="none",i.parentNode.insertBefore(r,i)),a.parentNode.insertBefore(i,a.nextSibling),"1"!=cp_special_page&&"0"==cp_promote_reading&&"0"==t?d.style.display="none":d.style.display="",d.onclick=function(){return addComment.cancelForm()},"1"==cp_tinymce&&this.enableForm(),i.style.display="block",addComment.clearCommentHighlight(this.parentID),addComment.highlightComment(t),this.text_signature=o,this.parentID=t;var l=[e,t,n,m,o];return $(document).trigger("commentpress-commentform-moved",["add",l]),!1},moveFormToPara:function(e,t,n){var m="reply_to_para-"+e;return addComment.moveForm(m,"0","respond",n,t),!1},moveFormToEdit:function(e,t,n,m,o,r,a){this.disableForm();var i,d=this.I(e),p=this.I(n),s=this.I("cancel-comment-reply-link"),c=this.I("comment_parent"),l=this.I("comment_post_ID");if(this.I("text_signature"))var _=this.I("text_signature");else var _="";if(!(d&&p&&s&&c))return void this.enableForm();addComment.commentEditResetForm(),this.commentEditMode="y";var u='<input type="hidden" name="cp_edit_comment" id="cp_edit_comment" value="y" />';$(u).appendTo("#commentform");var h=e.split("-")[1],v='<input type="hidden" name="comment_ID" id="comment_ID" value="'+h+'" />';$(v).appendTo("#commentform");var a='<input type="hidden" name="cpajax_comment_nonce" id="cpajax_comment_nonce" value="'+a+'" />';$(a).appendTo("#commentform"),l&&m&&(l.value=m),c.value=t,""!==_&&(_.value=o),this.respondID=n,this.previousTitle=$("#respond_title").text(),$("#respond_title").text(CommentPress_Form.localisation.edit_title),$("#author_details").hide(),$(".comment-content").css("display","block"),$("#"+e+" .comment-content").hide(),this.previousSubmit=$("#submit").attr("value"),$("#submit").attr("value",CommentPress_Form.localisation.submit),$("#comment").val(r),this.I("wp-temp-form-div")||(i=document.createElement("div"),i.id="wp-temp-form-div",i.style.display="none",p.parentNode.insertBefore(i,p)),d.parentNode.insertBefore(p,d.nextSibling),"1"!=cp_special_page&&"0"==cp_promote_reading&&"0"==t?s.style.display="none":s.style.display="",s.onclick=function(){return addComment.disableForm(),addComment.commentEditResetForm(),addComment.cancelForm()},"1"==cp_tinymce&&this.enableForm(),p.style.display="block",addComment.clearCommentHighlight(this.parentID),addComment.highlightComment(t),this.text_signature=o,this.parentID=t;var g=[e,t,n,m,o,r];return $(document).trigger("commentpress-commentform-moved",["edit",g]),!1},commentEditResetForm:function(){$("#respond_title").text(this.previousTitle),$("#author_details").show(),$(".comment-content").css("display","block"),$("#comment").val(""),$("#submit").attr("value",this.previousSubmit),this.commentEditMode="n",$("#cp_edit_comment").remove(),$("#comment_ID").remove(),$("#cpajax_comment_nonce").remove()},cancelForm:function(){var e=addComment.I("wp-temp-form-div"),t=addComment.I(addComment.respondID),n=this.I("cancel-comment-reply-link");if(e&&t){if(addComment.clearCommentHighlight(this.parentID),"1"!=cp_special_page){var m="",o="";if(addComment.I("text_signature")){m=addComment.I("text_signature").value,addComment.I("text_signature").value="";var r=$("#para_wrapper-"+m+" .reply_to_para").attr("id");if("undefined"==typeof r){var a=$("#respond").closest("div.paragraph_wrapper");if(a.length>0)var i=a.attr("id"),r=$("#"+i+" .reply_to_para").attr("id")}o=r.split("-")[1]}if("1"!=cp_promote_reading){var d=addComment.I("comment_post_ID").value;return addComment.moveFormToPara(o,m,d),!1}"none"!=t.style.display&&(t.style.display="none")}addComment.disableForm();addComment.I("comment_parent").value;addComment.I("comment_parent").value="0",e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e),n.style.display="none",n.onclick=null,addComment.setTitle("0",m,"cancel"),this.text_signature="",$("#comment").val(""),addComment.enableForm();var p=[];return $(document).trigger("commentpress-commentform-moved",["cancel",p]),!1}},I:function(e){return document.getElementById(e)},enableForm:function(){"1"==cp_tinymce&&("3"==cp_tinymce_version?setTimeout(function(){tinyMCE.execCommand("mceAddControl",!1,"comment"),tinyMCE.execCommand("render")},1):setTimeout(function(){tinyMCE.execCommand("mceAddEditor",!1,"comment"),tinyMCE.execCommand("render")},1))},disableForm:function(){"1"==cp_tinymce&&("3"==cp_tinymce_version?tinyMCE.execCommand("mceRemoveControl",!1,"comment"):tinyMCE.execCommand("mceRemoveEditor",!1,"comment"))},setTitle:function(e,t,n){var m=addComment.I("respond_title");if("undefined"==typeof e||"0"==e)if("undefined"==typeof t||""==t)if("1"==cp_special_page)m.innerHTML=CommentPress_Form.localisation.title;else{m.innerHTML=$("#para_wrapper-"+t+" a.reply_to_para").text();var o=$("#para_wrapper-"+addComment.text_signature+" .commentlist");o[0]&&"0"==cp_promote_reading&&$("#para_wrapper-"+addComment.text_signature+" div.reply_to_para").show(),"cancel"==n&&"1"==cp_promote_reading?$("div.reply_to_para").show():$("#para_wrapper-"+t+" div.reply_to_para").hide()}else{var r=$("#para_wrapper-"+t+" a.reply_to_para");m.innerHTML=r.text();var o=$("#para_wrapper-"+addComment.text_signature+" .commentlist");(o[0]&&"0"==cp_promote_reading||"1"==cp_promote_reading)&&"undefined"!=typeof addComment.text_signature&&$("#para_wrapper-"+addComment.text_signature+" div.reply_to_para").show(),"0"==cp_promote_reading?$("#para_wrapper-"+t+" div.reply_to_para").hide():"cancel"==n?$("div.reply_to_para").show():$("#para_wrapper-"+t+" div.reply_to_para").toggle()}else{var a=$("#comment-"+e+" > .reply")[0],i=$(a).text();""!=i&&(m.innerHTML=i,"1"==cp_promote_reading&&("undefined"!=typeof addComment.text_signature&&$("#para_wrapper-"+addComment.text_signature+" div.reply_to_para").show(),$("#para_wrapper-"+t+" div.reply_to_para").show()))}},highlightComment:function(e){"0"!=e&&$("#comment-"+e+" > .reply").css("display","none"),$(document).trigger("commentpress-comment-highlight",[e])},clearCommentHighlight:function(e){"0"!=e&&$("#comment-"+e+" > .reply").css("display","block"),$(document).trigger("commentpress-comment-unhighlight",[e])},clearAllCommentHighlights:function(){$(".reply").css("display","block"),$(document).trigger("commentpress-comment-highlights-clear")},getTextSig:function(){return this.text_signature},getLevel:function(){return"undefined"==typeof this.parentID||"0"===this.parentID}};
