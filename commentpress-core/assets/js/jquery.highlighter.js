(function(c){c.event.special.tripleclick={setup:function(g,f){var e=this,d=jQuery(e);d.bind("click",jQuery.event.special.tripleclick.handler)},teardown:function(f){var e=this,d=jQuery(e);d.unbind("click",jQuery.event.special.tripleclick.handler)},handler:function(g){var f=this,d=jQuery(f),e=d.data("clicks")||0;e+=1;if(e===3){e=0;g.type="tripleclick";jQuery.event.dispatch.apply(this,arguments)}d.data("clicks",e)}};function b(g){var f=g,d;try{d=g.previousSibling;while(d&&d.nodeType!=1){f=d;d=d.previousSibling}}catch(e){console.log(e);topOffset=-15;return f}return d?d:f}var a={init:function(e){var h=c.extend({selector:".highlighter-container",minWords:0,complete:function(){}},e);var g=0;var f=0;var i=0;var d=false;var j;return this.each(function(){function k(w){var s="<span class='dummy'></span>";f=0;i=0;if(g!==w){return}var n=(navigator.appName==="Microsoft Internet Explorer");var m,t,v,o;var u;if(window.getSelection){m=window.getSelection();j=m.toString();if(c.trim(j)===""||j.split(" ").length<h.minWords){return}if(m.getRangeAt&&m.rangeCount){t=window.getSelection().getRangeAt(0);v=t.cloneRange();v.collapse(false);var l=document.createElement("div");l.innerHTML=s;var q=document.createElement("span");if(t.startOffset===0&&t.endOffset===0){var x=v.startContainer;var p=b(x);try{v.selectNode(p.lastChild)}catch(r){i=40;f=-15;v.selectNode(p)}v.collapse(false)}else{if(t.endOffset===0){f=-25;i=40}}if(g!==w){return}c(h.selector).hide();if(!n&&c.trim(j)===c.trim(v.startContainer.innerText)){v.startContainer.innerHTML+="<span class='dummy'>&nbsp;</span>";u=c(".dummy").offset();c(".dummy").remove()}else{if(!n&&c.trim(j)===c.trim(v.endContainer.innerText)){v.endContainer.innerHTML+="<span class='dummy'>&nbsp;</span>";u=c(".dummy").offset();c(".dummy").remove()}else{v.insertNode(q);u=c(q).offset();q.parentNode.removeChild(q)}}}}else{if(document.selection&&document.selection.createRange){t=document.selection.createRange();v=t.duplicate();j=v.text;if(c.trim(j)===""||j.split(" ").length<h.minWords){return}t.collapse(false);t.pasteHTML(s);v.setEndPoint("EndToEnd",t);v.select();u=c(".dummy").offset();c(".dummy").remove()}}c(h.selector).css("top",u.top+f+"px");c(h.selector).css("left",u.left+i+"px");c(h.selector).show(300,function(){h.complete(j)})}c(h.selector).hide();c(h.selector).css("position","absolute");c(document).bind("mouseup.highlighter",function(l){if(d){g=1;clicks=0;setTimeout(function(){k(1)},300);d=false}});c(this).bind("mouseup.highlighter",function(l){g=1;clicks=0;setTimeout(function(){k(1)},300)});c(this).bind("tripleclick.highlighter",function(l){g=3;setTimeout(function(){k(3)},200)});c(this).bind("dblclick.highlighter",function(l){g=2;setTimeout(function(){k(2)},300)});c(this).bind("mousedown.highlighter",function(l){c(h.selector).hide();d=true})})},destroy:function(d){return this.each(function(){c(document).unbind("mouseup.highlighter");c(this).unbind("mouseup.highlighter");c(this).unbind("tripleclick.highlighter");c(this).unbind("dblclick.highlighter");c(this).unbind("mousedown.highlighter")})}};c.fn.highlighter=function(d){if(a[d]){return a[d].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof d==="object"||!d){return a.init.apply(this,arguments)}else{c.error("Method "+d+" does not exist on jQuery.highlighter")}}}})(jQuery);