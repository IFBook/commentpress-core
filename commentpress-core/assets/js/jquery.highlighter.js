!function(e){function t(e){var t,n=e;try{for(t=e.previousSibling;t&&1!=t.nodeType;)n=t,t=t.previousSibling}catch(i){return console.log(i),topOffset=-15,n}return t?t:n}e.event.special.tripleclick={setup:function(e,t){var n=this,i=jQuery(n);i.bind("click",jQuery.event.special.tripleclick.handler)},teardown:function(e){var t=this,n=jQuery(t);n.unbind("click",jQuery.event.special.tripleclick.handler)},handler:function(e){var t=this,n=jQuery(t),i=n.data("clicks")||0;i+=1,3===i&&(i=0,e.type="tripleclick",jQuery.event.dispatch.apply(this,arguments)),n.data("clicks",i)}};var n=!0,i={init:function(i){var r,o=e.extend({selector:".highlighter-container",minWords:0,complete:function(){}},i),s=0,c=0,l=0,u=!1;return this.each(function(){function i(i){if(n!==!1){var u="<span class='dummy'></span>";if(c=0,l=0,s===i){var a,h,d,m,p="Microsoft Internet Explorer"===navigator.appName;if(window.getSelection){if(a=window.getSelection(),r=a.toString(),""===e.trim(r)||r.split(" ").length<o.minWords)return;if(a.getRangeAt&&a.rangeCount){h=window.getSelection().getRangeAt(0),d=h.cloneRange(),d.collapse(!1);var f=document.createElement("div");f.innerHTML=u;var g=document.createElement("span");if(0===h.startOffset&&0===h.endOffset){var y=d.startContainer,v=t(y);try{d.selectNode(v.lastChild)}catch(b){l=40,c=-15,d.selectNode(v)}d.collapse(!1)}else 0===h.endOffset&&(c=-25,l=40);if(s!==i)return;e(o.selector).hide(),p||e.trim(r)!==e.trim(d.startContainer.innerText)?p||e.trim(r)!==e.trim(d.endContainer.innerText)?(d.insertNode(g),m=e(g).offset(),g.parentNode.removeChild(g)):(d.endContainer.innerHTML+="<span class='dummy'>&nbsp;</span>",m=e(".dummy").offset(),e(".dummy").remove()):(d.startContainer.innerHTML+="<span class='dummy'>&nbsp;</span>",m=e(".dummy").offset(),e(".dummy").remove())}}else if(document.selection&&document.selection.createRange){if(h=document.selection.createRange(),d=h.duplicate(),r=d.text,""===e.trim(r)||r.split(" ").length<o.minWords)return;h.collapse(!1),h.pasteHTML(u),d.setEndPoint("EndToEnd",h),d.select(),m=e(".dummy").offset(),e(".dummy").remove()}e(o.selector).css("top",m.top+c+"px"),e(o.selector).css("left",m.left+l+"px"),e(o.selector).show(300,function(){o.complete(r)})}}}e(o.selector).hide(),e(o.selector).css("position","absolute"),e(document).bind("mouseup.highlighter",function(e){u&&(s=1,clicks=0,setTimeout(function(){i(1)},300),u=!1)}),e(this).bind("mouseup.highlighter",function(e){s=1,clicks=0,setTimeout(function(){i(1)},300)}),e(this).bind("tripleclick.highlighter",function(e){s=3,setTimeout(function(){i(3)},200)}),e(this).bind("dblclick.highlighter",function(e){s=2,setTimeout(function(){i(2)},300)}),e(this).bind("mousedown.highlighter",function(t){e(o.selector).hide(),u=!0})})},enable:function(){n=!0},disable:function(){n=!1},destroy:function(t){return this.each(function(){e(document).unbind("mouseup.highlighter"),e(this).unbind("mouseup.highlighter"),e(this).unbind("tripleclick.highlighter"),e(this).unbind("dblclick.highlighter"),e(this).unbind("mousedown.highlighter")})}};e.fn.highlighter=function(t){return i[t]?i[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.highlighter"):i.init.apply(this,arguments)}}(jQuery);